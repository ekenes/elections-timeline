import"./customElement-f3f0392f.js";import"./customElement-340efed0.js";import{c as xe,e as Ce,x as P,n as $,I as Te,p as dt,fN as Mn}from"./index-02eff6e6.js";import{i as Ot}from"./keyed-3f928786.js";import{d as ut,a as Nn}from"./dom-6398ef91.js";import"./customElement-437b916f.js";import"./customElement-5fed6b8b.js";import{q as Me}from"./customElement-9b955858.js";import{e as kn,n as tn}from"./ref-66f161a0.js";import{S as Ne,i as Rn,a as en,b as Ae,c as _e,r as jn,f as Bn,d as nn}from"./debounce-0dae6e02.js";import{m as rn,p as on}from"./interactive-76d74b2e.js";import{u as an,i as sn,p as ln}from"./loadable-428510f5.js";import{s as cn}from"./useT9n-8c4524c7.js";import{b as Gn}from"./observers-e4b0c0b3.js";import{i as Tt,c as ke,h as Hn,o as ve,a as zn}from"./utils-9ed17977.js";import{i as Xn}from"./guid-292ce05e.js";import"./static-94e4448c.js";import"./form-cbc1973d.js";import"./key-a897e5ad.js";import"./label-8fb25420.js";import"./component-2bbc23c3.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v3.0.0-next.88
*/const pt={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},bt={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v3.0.0-next.88
*/const Yn=xe`:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,ee=class ee extends Ce{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(t){this.hasActionsStart=ut(t)}handleActionsEndSlotChange(t){this.hasActionsEnd=ut(t)}handleContentStartSlotChange(t){this.hasContentStart=ut(t)}handleContentEndSlotChange(t){this.hasContentEnd=ut(t)}renderActionsStart(){const{hasActionsStart:t}=this;return Ot("actions-start-container",P`<div class=${$(pt.actionsStart)} .hidden=${!t}><slot name=${bt.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:t}=this;return Ot("actions-end-container",P`<div class=${$(pt.actionsEnd)} .hidden=${!t}><slot name=${bt.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:t}=this;return P`<div class=${$(pt.contentStart)} .hidden=${!t}><slot name=${bt.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return P`<div class=${$(pt.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:t}=this;return P`<div class=${$(pt.contentEnd)} .hidden=${!t}><slot name=${bt.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return P`<div class=${$(pt.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};ee.properties={hasActionsEnd:16,hasActionsStart:16,hasContentEnd:16,hasContentStart:16,disabled:7},ee.styles=Yn;let be=ee;Te("calcite-stack",be);function Un(n,t){for(var e=-1,i=n==null?0:n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}var Wn=Array.isArray;const dn=Wn;var qn=1/0,Re=Ne?Ne.prototype:void 0,je=Re?Re.toString:void 0;function hn(n){if(typeof n=="string")return n;if(dn(n))return Un(n,hn)+"";if(Rn(n))return je?je.call(n):"";var t=n+"";return t=="0"&&1/n==-qn?"-0":t}function Vn(n){return n}var Kn="[object AsyncFunction]",Zn="[object Function]",Qn="[object GeneratorFunction]",Jn="[object Proxy]";function ti(n){if(!en(n))return!1;var t=Ae(n);return t==Zn||t==Qn||t==Kn||t==Jn}var ei=9007199254740991,ni=/^(?:0|[1-9]\d*)$/;function ii(n,t){var e=typeof n;return t=t??ei,!!t&&(e=="number"||e!="symbol"&&ni.test(n))&&n>-1&&n%1==0&&n<t}var ri=9007199254740991;function un(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=ri}function oi(n){return n!=null&&un(n.length)&&!ti(n)}var ai=Object.prototype;function si(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||ai;return n===e}function li(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var ci="[object Arguments]";function Be(n){return _e(n)&&Ae(n)==ci}var fn=Object.prototype,di=fn.hasOwnProperty,hi=fn.propertyIsEnumerable,ui=Be(function(){return arguments}())?Be:function(n){return _e(n)&&di.call(n,"callee")&&!hi.call(n,"callee")};const fi=ui;function pi(){return!1}var pn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ge=pn&&typeof module=="object"&&module&&!module.nodeType&&module,gi=Ge&&Ge.exports===pn,He=gi?jn.Buffer:void 0,mi=He?He.isBuffer:void 0,vi=mi||pi;const bi=vi;var yi="[object Arguments]",Ei="[object Array]",Ii="[object Boolean]",wi="[object Date]",Si="[object Error]",Di="[object Function]",xi="[object Map]",Ci="[object Number]",Ti="[object Object]",Ai="[object RegExp]",_i="[object Set]",Pi="[object String]",Oi="[object WeakMap]",Fi="[object ArrayBuffer]",$i="[object DataView]",Li="[object Float32Array]",Mi="[object Float64Array]",Ni="[object Int8Array]",ki="[object Int16Array]",Ri="[object Int32Array]",ji="[object Uint8Array]",Bi="[object Uint8ClampedArray]",Gi="[object Uint16Array]",Hi="[object Uint32Array]",w={};w[Li]=w[Mi]=w[Ni]=w[ki]=w[Ri]=w[ji]=w[Bi]=w[Gi]=w[Hi]=!0;w[yi]=w[Ei]=w[Fi]=w[Ii]=w[$i]=w[wi]=w[Si]=w[Di]=w[xi]=w[Ci]=w[Ti]=w[Ai]=w[_i]=w[Pi]=w[Oi]=!1;function zi(n){return _e(n)&&un(n.length)&&!!w[Ae(n)]}function Xi(n){return function(t){return n(t)}}var gn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ft=gn&&typeof module=="object"&&module&&!module.nodeType&&module,Yi=Ft&&Ft.exports===gn,oe=Yi&&Bn.process,Ui=function(){try{var n=Ft&&Ft.require&&Ft.require("util").types;return n||oe&&oe.binding&&oe.binding("util")}catch{}}();const ze=Ui;var Xe=ze&&ze.isTypedArray,Wi=Xe?Xi(Xe):zi;const qi=Wi;var Vi=Object.prototype,Ki=Vi.hasOwnProperty;function Zi(n,t){var e=dn(n),i=!e&&fi(n),r=!e&&!i&&bi(n),o=!e&&!i&&!r&&qi(n),a=e||i||r||o,s=a?li(n.length,String):[],l=s.length;for(var c in n)(t||Ki.call(n,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ii(c,l)))&&s.push(c);return s}function Qi(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var Ji=Object.prototype,tr=Ji.hasOwnProperty;function er(n){if(!en(n))return Qi(n);var t=si(n),e=[];for(var i in n)i=="constructor"&&(t||!tr.call(n,i))||e.push(i);return e}function nr(n){return oi(n)?Zi(n,!0):er(n)}function ir(n){return n==null?"":hn(n)}function rr(n){return function(t,e,i){for(var r=-1,o=Object(t),a=i(t),s=a.length;s--;){var l=a[n?s:++r];if(e(o[l],l,o)===!1)break}return t}}var or=rr();const ar=or;function sr(n){return typeof n=="function"?n:Vn}var mn=/[\\^$.*+?()[\]{}|]/g,lr=RegExp(mn.source);function cr(n){return n=ir(n),n&&lr.test(n)?n.replace(mn,"\\$&"):n}function dr(n,t){return n==null?n:ar(n,sr(t),nr)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v3.0.0-next.88
*/const ae=(n,t,e)=>{const i=cr(t),r=new RegExp(i,"i");n.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const o=(a,s,l)=>{if(a!=null&&a.constant||a!=null&&a.filterDisabled)return!0;let c=!1;return dr(a,(u,d)=>{typeof u=="function"||u==null||l&&!l.includes(d)||(Array.isArray(u)||typeof u=="object"&&u!==null?o(u,s)&&(c=!0):s.test(u)&&(c=!0))}),c};return n.filter(a=>o(a,r,e))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v3.0.0-next.88
*/const hr={container:"container",searchIcon:"search-icon"},ur={search:"search",close:"x"},fr=xe`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding:var(--calcite-spacing-md)}:host([scale=l]) .container{padding:var(--calcite-spacing-lg)}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}input[type=text]{margin-block-end:.25rem;inline-size:100%;border-style:none;background-color:transparent;padding-block:.25rem;font-family:inherit;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);padding-inline-end:.25rem;padding-inline-start:1.5rem;transition:padding var(--calcite-animation-timing),box-shadow var(--calcite-animation-timing)}input[type=text]::-ms-clear{display:none}calcite-input{inline-size:100%}.search-icon{position:absolute;display:flex;color:var(--calcite-color-text-2);inset-inline-start:0;transition:inset-inline-start var(--calcite-animation-timing),inset-inline-end var(--calcite-animation-timing),opacity var(--calcite-animation-timing)}input[type=text]:focus{border-color:var(--calcite-color-brand);outline:2px solid transparent;outline-offset:2px;padding-inline:.25rem}input[type=text]:focus~.search-icon{inset-inline-start:-1rem;opacity:0}.clear-button{display:flex;cursor:pointer;align-items:center;border-width:0px;background-color:transparent;color:var(--calcite-color-text-2)}.clear-button:hover,.clear-button:focus{color:var(--calcite-color-text-1)}:host([hidden]){display:none}[hidden]{display:none}`;var ft;let pr=(ft=class extends Ce{constructor(){super(...arguments),this.filterDebounced=nn((t,e=!1,i)=>this.updateFiltered(ae(this.items??[],t,this.filterProps),e,i),Mn.filter),this.textInput=kn(),this._value="",this.disabled=!1,this.filteredItems=[],this.items=[],this.messages=cn(),this.scale="m",this.calciteFilterChange=dt({cancelable:!1})}get value(){return this._value}set value(t){const e=this._value;t!==e&&(this._value=t,this.valueHandler(t))}async filter(t=this.value){return new Promise(e=>{this.value=t,this.updateFiltered(ae(this.items??[],t,this.filterProps),!1,e)})}async setFocus(){var t;return await an(this),(t=this.textInput.value)==null?void 0:t.setFocus()}async load(){sn(this),this.updateFiltered(ae(this.items??[],this.value,this.filterProps))}willUpdate(t){var e;(t.has("items")&&(this.hasUpdated||((e=this.items)==null?void 0:e.length)>0)||t.has("filterProps"))&&this.filterDebounced(this.value)}updated(){rn(this)}loaded(){ln(this)}disconnectedCallback(){super.disconnectedCallback(),this.filterDebounced.cancel()}valueHandler(t){this.filterDebounced(t)}inputHandler(t){const e=t.target;this.value=e.value,this.filterDebounced(e.value,!0)}keyDownHandler(t){t.defaultPrevented||(t.key==="Escape"&&(this.clear(),t.preventDefault()),t.key==="Enter"&&t.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(t,e=!1,i){this.filteredItems=t,e&&this.calciteFilterChange.emit(),i==null||i()}render(){const{disabled:t,scale:e}=this;return on({disabled:t,children:P`<div class=${$(hr.container)}><label><calcite-input clearable .disabled=${t} .icon=${ur.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${e} type=text .value=${this.value} ${tn(this.textInput)}></calcite-input></label></div>`})}},ft.properties={disabled:7,filterProps:0,filteredItems:0,items:0,label:1,messageOverrides:0,placeholder:1,scale:3,value:1},ft.shadowRootOptions={mode:"open",delegatesFocus:!0},ft.styles=fr,ft);Te("calcite-filter",pr);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ye(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function W(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(e),!0).forEach(function(i){gr(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ye(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Yt(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yt=function(t){return typeof t}:Yt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(n)}function gr(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Z(){return Z=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Z.apply(this,arguments)}function mr(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function vr(n,t){if(n==null)return{};var e=mr(n,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}var br="1.15.6";function K(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Q=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Rt=K(/Edge/i),Ue=K(/firefox/i),$t=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),Pe=K(/iP(ad|od|hone)/i),vn=K(/chrome/i)&&K(/android/i),bn={capture:!1,passive:!1};function b(n,t,e){n.addEventListener(t,e,!Q&&bn)}function v(n,t,e){n.removeEventListener(t,e,!Q&&bn)}function Kt(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function yn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function X(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&Kt(n,t):Kt(n,t))||i&&n===e)return n;if(n===e)break}while(n=yn(n))}return null}var We=/\s+/g;function R(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(We," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(We," ")}}function f(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}function Et(n,t){var e="";if(typeof n=="string")e=n;else do{var i=f(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function En(n,t,e){if(n){var i=n.getElementsByTagName(t),r=0,o=i.length;if(e)for(;r<o;r++)e(i[r],r);return i}return[]}function U(){var n=document.scrollingElement;return n||document.documentElement}function T(n,t,e,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var o,a,s,l,c,u,d;if(n!==window&&n.parentNode&&n!==U()?(o=n.getBoundingClientRect(),a=o.top,s=o.left,l=o.bottom,c=o.right,u=o.height,d=o.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||e)&&n!==window&&(r=r||n.parentNode,!Q))do if(r&&r.getBoundingClientRect&&(f(r,"transform")!=="none"||e&&f(r,"position")!=="static")){var m=r.getBoundingClientRect();a-=m.top+parseInt(f(r,"border-top-width")),s-=m.left+parseInt(f(r,"border-left-width")),l=a+o.height,c=s+o.width;break}while(r=r.parentNode);if(i&&n!==window){var I=Et(r||n),y=I&&I.a,E=I&&I.d;I&&(a/=E,s/=y,d/=y,u/=E,l=a+u,c=s+d)}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function qe(n,t,e){for(var i=rt(n,!0),r=T(n)[t];i;){var o=T(i)[e],a=void 0;if(e==="top"||e==="left"?a=r>=o:a=r<=o,!a)return i;if(i===U())break;i=rt(i,!1)}return!1}function It(n,t,e,i){for(var r=0,o=0,a=n.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==p.ghost&&(i||a[o]!==p.dragged)&&X(a[o],e.draggable,n,!1)){if(r===t)return a[o];r++}o++}return null}function Oe(n,t){for(var e=n.lastElementChild;e&&(e===p.ghost||f(e,"display")==="none"||t&&!Kt(e,t));)e=e.previousElementSibling;return e||null}function B(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==p.clone&&(!t||Kt(n,t))&&e++;return e}function Ve(n){var t=0,e=0,i=U();if(n)do{var r=Et(n),o=r.a,a=r.d;t+=n.scrollLeft*o,e+=n.scrollTop*a}while(n!==i&&(n=n.parentNode));return[t,e]}function yr(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}function rt(n,t){if(!n||!n.getBoundingClientRect)return U();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=f(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return U();if(i||t)return e;i=!0}}while(e=e.parentNode);return U()}function Er(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function se(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var Lt;function In(n,t){return function(){if(!Lt){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),Lt=setTimeout(function(){Lt=void 0},t)}}}function Ir(){clearTimeout(Lt),Lt=void 0}function wn(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function Sn(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}function Dn(n,t,e){var i={};return Array.from(n.children).forEach(function(r){var o,a,s,l;if(!(!X(r,t.draggable,n,!1)||r.animated||r===e)){var c=T(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,c.left),i.top=Math.min((a=i.top)!==null&&a!==void 0?a:1/0,c.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var M="Sortable"+new Date().getTime();function wr(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(f(r,"display")==="none"||r===p.ghost)){n.push({target:r,rect:T(r)});var o=W({},n[n.length-1].rect);if(r.thisAnimationDuration){var a=Et(r,!0);a&&(o.top-=a.f,o.left-=a.e)}r.fromRect=o}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(yr(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var o=!1,a=0;n.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=T(c),m=c.prevFromRect,I=c.prevToRect,y=s.rect,E=Et(c,!0);E&&(d.top-=E.f,d.left-=E.e),c.toRect=d,c.thisAnimationDuration&&se(m,d)&&!se(u,d)&&(y.top-d.top)/(y.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Dr(y,m,I,r.options)),se(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=r.options.animation),r.animate(c,y,d,l)),l&&(o=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof i=="function"&&i()},a):typeof i=="function"&&i(),n=[]},animate:function(i,r,o,a){if(a){f(i,"transition",""),f(i,"transform","");var s=Et(this.el),l=s&&s.a,c=s&&s.d,u=(r.left-o.left)/(l||1),d=(r.top-o.top)/(c||1);i.animatingX=!!u,i.animatingY=!!d,f(i,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Sr(i),f(i,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),f(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){f(i,"transition",""),f(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},a)}}}}function Sr(n){return n.offsetWidth}function Dr(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}var gt=[],le={initializeByDefault:!0},jt={mount:function(t){for(var e in le)le.hasOwnProperty(e)&&!(e in t)&&(t[e]=le[e]);gt.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),gt.push(t)},pluginEvent:function(t,e,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=t+"Global";gt.forEach(function(a){e[a.pluginName]&&(e[a.pluginName][o]&&e[a.pluginName][o](W({sortable:e},i)),e.options[a.pluginName]&&e[a.pluginName][t]&&e[a.pluginName][t](W({sortable:e},i)))})},initializePlugins:function(t,e,i,r){gt.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var c=new s(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,Z(i,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var a=this.modifyOption(t,o,t.options[o]);typeof a<"u"&&(t.options[o]=a)}},getEventProperties:function(t,e){var i={};return gt.forEach(function(r){typeof r.eventProperties=="function"&&Z(i,r.eventProperties.call(e[r.pluginName],t))}),i},modifyOption:function(t,e,i){var r;return gt.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],i))}),r}};function xr(n){var t=n.sortable,e=n.rootEl,i=n.name,r=n.targetEl,o=n.cloneEl,a=n.toEl,s=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,d=n.newDraggableIndex,m=n.originalEvent,I=n.putSortable,y=n.extraEventProperties;if(t=t||e&&e[M],!!t){var E,G=t.options,q="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Q&&!Rt?E=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(i,!0,!0)),E.to=a||e,E.from=s||e,E.item=r||e,E.clone=o,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=u,E.newDraggableIndex=d,E.originalEvent=m,E.pullMode=I?I.lastPutMode:void 0;var O=W(W({},y),jt.getEventProperties(i,t));for(var H in O)E[H]=O[H];e&&e.dispatchEvent(E),G[q]&&G[q].call(t,E)}}var Cr=["evt"],L=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=vr(i,Cr);jt.pluginEvent.bind(p)(t,e,W({dragEl:h,parentEl:x,ghostEl:g,rootEl:S,nextEl:ht,lastDownEl:Ut,cloneEl:D,cloneHidden:it,dragStarted:At,putSortable:A,activeSortable:p.active,originalEvent:r,oldIndex:yt,oldDraggableIndex:Mt,newIndex:j,newDraggableIndex:nt,hideGhostForTarget:An,unhideGhostForTarget:_n,cloneNowHidden:function(){it=!0},cloneNowShown:function(){it=!1},dispatchSortableEvent:function(s){F({sortable:e,name:s,originalEvent:r})}},o))};function F(n){xr(W({putSortable:A,cloneEl:D,targetEl:h,rootEl:S,oldIndex:yt,oldDraggableIndex:Mt,newIndex:j,newDraggableIndex:nt},n))}var h,x,g,S,ht,Ut,D,it,yt,j,Mt,nt,Gt,A,vt=!1,Zt=!1,Qt=[],lt,z,ce,de,Ke,Ze,At,mt,Nt,kt=!1,Ht=!1,Wt,_,he=[],ye=!1,Jt=[],ie=typeof document<"u",zt=Pe,Qe=Rt||Q?"cssFloat":"float",Tr=ie&&!vn&&!Pe&&"draggable"in document.createElement("div"),xn=function(){if(ie){if(Q)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Cn=function(t,e){var i=f(t),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=It(t,0,e),a=It(t,1,e),s=o&&f(o),l=a&&f(a),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+T(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(a).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=r&&i[Qe]==="none"||a&&i[Qe]==="none"&&c+u>r)?"vertical":"horizontal"},Ar=function(t,e,i){var r=i?t.left:t.top,o=i?t.right:t.bottom,a=i?t.width:t.height,s=i?e.left:e.top,l=i?e.right:e.bottom,c=i?e.width:e.height;return r===s||o===l||r+a/2===s+c/2},_r=function(t,e){var i;return Qt.some(function(r){var o=r[M].options.emptyInsertThreshold;if(!(!o||Oe(r))){var a=T(r),s=t>=a.left-o&&t<=a.right+o,l=e>=a.top-o&&e<=a.bottom+o;if(s&&l)return i=r}}),i},Tn=function(t){function e(o,a){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(o==null&&(a||d))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return e(o(s,l,c,u),a)(s,l,c,u);var m=(a?s:l).options.group.name;return o===!0||typeof o=="string"&&o===m||o.join&&o.indexOf(m)>-1}}var i={},r=t.group;(!r||Yt(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=e(r.pull,!0),i.checkPut=e(r.put),i.revertClone=r.revertClone,t.group=i},An=function(){!xn&&g&&f(g,"display","none")},_n=function(){!xn&&g&&f(g,"display","")};ie&&!vn&&document.addEventListener("click",function(n){if(Zt)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Zt=!1,!1},!0);var ct=function(t){if(h){t=t.touches?t.touches[0]:t;var e=_r(t.clientX,t.clientY);if(e){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[M]._onDragOver(i)}}},Pr=function(t){h&&h.parentNode[M]._isOutsideThisEl(t.target)};function p(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=Z({},t),n[M]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cn(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&(!$t||Pe),emptyInsertThreshold:5};jt.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);Tn(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:Tr,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?b(n,"pointerdown",this._onTapStart):(b(n,"mousedown",this._onTapStart),b(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(b(n,"dragover",this),b(n,"dragenter",this)),Qt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Z(this,wr())}p.prototype={constructor:p,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(mt=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,h):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,r=this.options,o=r.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=r.filter;if(Rr(i),!h&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&$t&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=X(l,r.draggable,i,!1),!(l&&l.animated)&&Ut!==l)){if(yt=B(l),Mt=B(l,r.draggable),typeof u=="function"){if(u.call(this,t,l,this)){F({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),L("filter",e,{evt:t}),o&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=X(c,d.trim(),i,!1),d)return F({sortable:e,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),L("filter",e,{evt:t}),!0}),u)){o&&t.preventDefault();return}r.handle&&!X(c,r.handle,i,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,i){var r=this,o=r.el,a=r.options,s=o.ownerDocument,l;if(i&&!h&&i.parentNode===o){var c=T(i);if(S=o,h=i,x=h.parentNode,ht=h.nextSibling,Ut=i,Gt=a.group,p.dragged=h,lt={target:h,clientX:(e||t).clientX,clientY:(e||t).clientY},Ke=lt.clientX-c.left,Ze=lt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,h.style["will-change"]="all",l=function(){if(L("delayEnded",r,{evt:t}),p.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Ue&&r.nativeDraggable&&(h.draggable=!0),r._triggerDragStart(t,e),F({sortable:r,name:"choose",originalEvent:t}),R(h,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){En(h,u.trim(),ue)}),b(s,"dragover",ct),b(s,"mousemove",ct),b(s,"touchmove",ct),a.supportPointer?(b(s,"pointerup",r._onDrop),!this.nativeDraggable&&b(s,"pointercancel",r._onDrop)):(b(s,"mouseup",r._onDrop),b(s,"touchend",r._onDrop),b(s,"touchcancel",r._onDrop)),Ue&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),L("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Rt||Q))){if(p.eventCanceled){this._onDrop();return}a.supportPointer?(b(s,"pointerup",r._disableDelayedDrag),b(s,"pointercancel",r._disableDelayedDrag)):(b(s,"mouseup",r._disableDelayedDrag),b(s,"touchend",r._disableDelayedDrag),b(s,"touchcancel",r._disableDelayedDrag)),b(s,"mousemove",r._delayedDragTouchMoveHandler),b(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&b(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&ue(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._disableDelayedDrag),v(t,"touchend",this._disableDelayedDrag),v(t,"touchcancel",this._disableDelayedDrag),v(t,"pointerup",this._disableDelayedDrag),v(t,"pointercancel",this._disableDelayedDrag),v(t,"mousemove",this._delayedDragTouchMoveHandler),v(t,"touchmove",this._delayedDragTouchMoveHandler),v(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?b(document,"pointermove",this._onTouchMove):e?b(document,"touchmove",this._onTouchMove):b(document,"mousemove",this._onTouchMove):(b(h,"dragend",this),b(S,"dragstart",this._onDragStart));try{document.selection?qt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(vt=!1,S&&h){L("dragStarted",this,{evt:e}),this.nativeDraggable&&b(document,"dragover",Pr);var i=this.options;!t&&R(h,i.dragClass,!1),R(h,i.ghostClass,!0),p.active=this,t&&this._appendGhost(),F({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(z){this._lastX=z.clientX,this._lastY=z.clientY,An();for(var t=document.elementFromPoint(z.clientX,z.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(z.clientX,z.clientY),t!==e);)e=t;if(h.parentNode[M]._isOutsideThisEl(t),e)do{if(e[M]){var i=void 0;if(i=e[M]._onDragOver({clientX:z.clientX,clientY:z.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=yn(e));_n()}},_onTouchMove:function(t){if(lt){var e=this.options,i=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,a=g&&Et(g,!0),s=g&&a&&a.a,l=g&&a&&a.d,c=zt&&_&&Ve(_),u=(o.clientX-lt.clientX+r.x)/(s||1)+(c?c[0]-he[0]:0)/(s||1),d=(o.clientY-lt.clientY+r.y)/(l||1)+(c?c[1]-he[1]:0)/(l||1);if(!p.active&&!vt){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(g){a?(a.e+=u-(ce||0),a.f+=d-(de||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var m="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");f(g,"webkitTransform",m),f(g,"mozTransform",m),f(g,"msTransform",m),f(g,"transform",m),ce=u,de=d,z=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!g){var t=this.options.fallbackOnBody?document.body:S,e=T(h,!0,zt,!0,t),i=this.options;if(zt){for(_=t;f(_,"position")==="static"&&f(_,"transform")==="none"&&_!==document;)_=_.parentNode;_!==document.body&&_!==document.documentElement?(_===document&&(_=U()),e.top+=_.scrollTop,e.left+=_.scrollLeft):_=U(),he=Ve(_)}g=h.cloneNode(!0),R(g,i.ghostClass,!1),R(g,i.fallbackClass,!0),R(g,i.dragClass,!0),f(g,"transition",""),f(g,"transform",""),f(g,"box-sizing","border-box"),f(g,"margin",0),f(g,"top",e.top),f(g,"left",e.left),f(g,"width",e.width),f(g,"height",e.height),f(g,"opacity","0.8"),f(g,"position",zt?"absolute":"fixed"),f(g,"zIndex","100000"),f(g,"pointerEvents","none"),p.ghost=g,t.appendChild(g),f(g,"transform-origin",Ke/parseInt(g.style.width)*100+"% "+Ze/parseInt(g.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,r=t.dataTransfer,o=i.options;if(L("dragStart",this,{evt:t}),p.eventCanceled){this._onDrop();return}L("setupClone",this),p.eventCanceled||(D=Sn(h),D.removeAttribute("id"),D.draggable=!1,D.style["will-change"]="",this._hideClone(),R(D,this.options.chosenClass,!1),p.clone=D),i.cloneId=qt(function(){L("clone",i),!p.eventCanceled&&(i.options.removeCloneOnHide||S.insertBefore(D,h),i._hideClone(),F({sortable:i,name:"clone"}))}),!e&&R(h,o.dragClass,!0),e?(Zt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(v(document,"mouseup",i._onDrop),v(document,"touchend",i._onDrop),v(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,h)),b(document,"drop",i),f(h,"transform","translateZ(0)")),vt=!0,i._dragStartId=qt(i._dragStarted.bind(i,e,t)),b(document,"selectstart",i),At=!0,window.getSelection().removeAllRanges(),$t&&f(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,r,o,a,s=this.options,l=s.group,c=p.active,u=Gt===l,d=s.sort,m=A||c,I,y=this,E=!1;if(ye)return;function G(Ct,$n){L(Ct,y,W({evt:t,isOwner:u,axis:I?"vertical":"horizontal",revert:a,dragRect:r,targetRect:o,canSort:d,fromSortable:m,target:i,completed:O,onMove:function(Le,Ln){return Xt(S,e,h,r,Le,T(Le),t,Ln)},changed:H},$n))}function q(){G("dragOverAnimationCapture"),y.captureAnimationState(),y!==m&&m.captureAnimationState()}function O(Ct){return G("dragOverCompleted",{insertion:Ct}),Ct&&(u?c._hideClone():c._showClone(y),y!==m&&(R(h,A?A.options.ghostClass:c.options.ghostClass,!1),R(h,s.ghostClass,!0)),A!==y&&y!==p.active?A=y:y===p.active&&A&&(A=null),m===y&&(y._ignoreWhileAnimating=i),y.animateAll(function(){G("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===h&&!h.animated||i===e&&!i.animated)&&(mt=null),!s.dragoverBubble&&!t.rootEl&&i!==document&&(h.parentNode[M]._isOutsideThisEl(t.target),!Ct&&ct(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),E=!0}function H(){j=B(h),nt=B(h,s.draggable),F({sortable:y,name:"change",toEl:e,newIndex:j,newDraggableIndex:nt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=X(i,s.draggable,e,!0),G("dragOver"),p.eventCanceled)return E;if(h.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||y._ignoreWhileAnimating===i)return O(!1);if(Zt=!1,c&&!s.disabled&&(u?d||(a=x!==S):A===this||(this.lastPutMode=Gt.checkPull(this,c,h,t))&&l.checkPut(this,c,h,t))){if(I=this._getDirection(t,i)==="vertical",r=T(h),G("dragOverValid"),p.eventCanceled)return E;if(a)return x=S,q(),this._hideClone(),G("revert"),p.eventCanceled||(ht?S.insertBefore(h,ht):S.appendChild(h)),O(!0);var N=Oe(e,s.draggable);if(!N||Lr(t,I,this)&&!N.animated){if(N===h)return O(!1);if(N&&e===t.target&&(i=N),i&&(o=T(i)),Xt(S,e,h,r,i,o,t,!!i)!==!1)return q(),N&&N.nextSibling?e.insertBefore(h,N.nextSibling):e.appendChild(h),x=e,H(),O(!0)}else if(N&&$r(t,I,this)){var ot=It(e,0,s,!0);if(ot===h)return O(!1);if(i=ot,o=T(i),Xt(S,e,h,r,i,o,t,!1)!==!1)return q(),e.insertBefore(h,ot),x=e,H(),O(!0)}else if(i.parentNode===e){o=T(i);var Y=0,at,wt=h.parentNode!==e,k=!Ar(h.animated&&h.toRect||r,i.animated&&i.toRect||o,I),St=I?"top":"left",J=qe(i,"top","top")||qe(h,"top","top"),Dt=J?J.scrollTop:void 0;mt!==i&&(at=o[St],kt=!1,Ht=!k&&s.invertSwap||wt),Y=Mr(t,i,o,I,k?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ht,mt===i);var V;if(Y!==0){var st=B(h);do st-=Y,V=x.children[st];while(V&&(f(V,"display")==="none"||V===g))}if(Y===0||V===i)return O(!1);mt=i,Nt=Y;var xt=i.nextElementSibling,tt=!1;tt=Y===1;var Bt=Xt(S,e,h,r,i,o,t,tt);if(Bt!==!1)return(Bt===1||Bt===-1)&&(tt=Bt===1),ye=!0,setTimeout(Fr,30),q(),tt&&!xt?e.appendChild(h):i.parentNode.insertBefore(h,tt?xt:i),J&&wn(J,0,Dt-J.scrollTop),x=h.parentNode,at!==void 0&&!Ht&&(Wt=Math.abs(at-T(i)[St])),H(),O(!0)}if(e.contains(h))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",ct),v(document,"mousemove",ct),v(document,"touchmove",ct)},_offUpEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._onDrop),v(t,"touchend",this._onDrop),v(t,"pointerup",this._onDrop),v(t,"pointercancel",this._onDrop),v(t,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(j=B(h),nt=B(h,i.draggable),L("drop",this,{evt:t}),x=h&&h.parentNode,j=B(h),nt=B(h,i.draggable),p.eventCanceled){this._nulling();return}vt=!1,Ht=!1,kt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ee(this.cloneId),Ee(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$t&&f(document.body,"user-select",""),f(h,"transform",""),t&&(At&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(S===x||A&&A.lastPutMode!=="clone")&&D&&D.parentNode&&D.parentNode.removeChild(D),h&&(this.nativeDraggable&&v(h,"dragend",this),ue(h),h.style["will-change"]="",At&&!vt&&R(h,A?A.options.ghostClass:this.options.ghostClass,!1),R(h,this.options.chosenClass,!1),F({sortable:this,name:"unchoose",toEl:x,newIndex:null,newDraggableIndex:null,originalEvent:t}),S!==x?(j>=0&&(F({rootEl:x,name:"add",toEl:x,fromEl:S,originalEvent:t}),F({sortable:this,name:"remove",toEl:x,originalEvent:t}),F({rootEl:x,name:"sort",toEl:x,fromEl:S,originalEvent:t}),F({sortable:this,name:"sort",toEl:x,originalEvent:t})),A&&A.save()):j!==yt&&j>=0&&(F({sortable:this,name:"update",toEl:x,originalEvent:t}),F({sortable:this,name:"sort",toEl:x,originalEvent:t})),p.active&&((j==null||j===-1)&&(j=yt,nt=Mt),F({sortable:this,name:"end",toEl:x,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){L("nulling",this),S=h=x=g=ht=D=Ut=it=lt=z=At=j=nt=yt=Mt=mt=Nt=A=Gt=p.dragged=p.ghost=p.clone=p.active=null,Jt.forEach(function(t){t.checked=!0}),Jt.length=ce=de=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":h&&(this._onDragOver(t),Or(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,r=0,o=i.length,a=this.options;r<o;r++)e=i[r],X(e,a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||kr(e));return t},sort:function(t,e){var i={},r=this.el;this.toArray().forEach(function(o,a){var s=r.children[a];X(s,this.options.draggable,r,!1)&&(i[o]=s)},this),e&&this.captureAnimationState(),t.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return X(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var r=jt.modifyOption(this,t,e);typeof r<"u"?i[t]=r:i[t]=e,t==="group"&&Tn(i)},destroy:function(){L("destroy",this);var t=this.el;t[M]=null,v(t,"mousedown",this._onTapStart),v(t,"touchstart",this._onTapStart),v(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(t,"dragover",this),v(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qt.splice(Qt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!it){if(L("hideClone",this),p.eventCanceled)return;f(D,"display","none"),this.options.removeCloneOnHide&&D.parentNode&&D.parentNode.removeChild(D),it=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(it){if(L("showClone",this),p.eventCanceled)return;h.parentNode==S&&!this.options.group.revertClone?S.insertBefore(D,h):ht?S.insertBefore(D,ht):S.appendChild(D),this.options.group.revertClone&&this.animate(h,D),f(D,"display",""),it=!1}}};function Or(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Xt(n,t,e,i,r,o,a,s){var l,c=n[M],u=c.options.onMove,d;return window.CustomEvent&&!Q&&!Rt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=n,l.dragged=e,l.draggedRect=i,l.related=r||t,l.relatedRect=o||T(t),l.willInsertAfter=s,l.originalEvent=a,n.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function ue(n){n.draggable=!1}function Fr(){ye=!1}function $r(n,t,e){var i=T(It(e.el,0,e.options,!0)),r=Dn(e.el,e.options,g),o=10;return t?n.clientX<r.left-o||n.clientY<i.top&&n.clientX<i.right:n.clientY<r.top-o||n.clientY<i.bottom&&n.clientX<i.left}function Lr(n,t,e){var i=T(Oe(e.el,e.options.draggable)),r=Dn(e.el,e.options,g),o=10;return t?n.clientX>r.right+o||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>r.bottom+o||n.clientX>i.right&&n.clientY>i.top}function Mr(n,t,e,i,r,o,a,s){var l=i?n.clientY:n.clientX,c=i?e.height:e.width,u=i?e.top:e.left,d=i?e.bottom:e.right,m=!1;if(!a){if(s&&Wt<c*r){if(!kt&&(Nt===1?l>u+c*o/2:l<d-c*o/2)&&(kt=!0),kt)m=!0;else if(Nt===1?l<u+Wt:l>d-Wt)return-Nt}else if(l>u+c*(1-r)/2&&l<d-c*(1-r)/2)return Nr(t)}return m=m||a,m&&(l<u+c*o/2||l>d-c*o/2)?l>u+c/2?1:-1:0}function Nr(n){return B(h)<B(n)?1:-1}function kr(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}function Rr(n){Jt.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&Jt.push(i)}}function qt(n){return setTimeout(n,0)}function Ee(n){return clearTimeout(n)}ie&&b(document,"touchmove",function(n){(p.active||vt)&&n.cancelable&&n.preventDefault()});p.utils={on:b,off:v,css:f,find:En,is:function(t,e){return!!X(t,e,t,!1)},extend:Er,throttle:In,closest:X,toggleClass:R,clone:Sn,index:B,nextTick:qt,cancelNextTick:Ee,detectDirection:Cn,getChild:It,expando:M};p.get=function(n){return n[M]};p.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(p.utils=W(W({},p.utils),i.utils)),jt.mount(i)})};p.create=function(n,t){return new p(n,t)};p.version=br;var C=[],_t,Ie,we=!1,fe,pe,te,Pt;function jr(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):this.options.supportPointer?b(document,"pointermove",this._handleFallbackAutoScroll):i.touches?b(document,"touchmove",this._handleFallbackAutoScroll):b(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),Je(),Vt(),Ir()},nulling:function(){te=Ie=_t=we=Pt=fe=pe=null,C.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var r=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(o,a);if(te=e,i||this.options.forceAutoScrollFallback||Rt||Q||$t){ge(e,this.options,s,i);var l=rt(s,!0);we&&(!Pt||o!==fe||a!==pe)&&(Pt&&Je(),Pt=setInterval(function(){var c=rt(document.elementFromPoint(o,a),!0);c!==l&&(l=c,Vt()),ge(e,r.options,c,i)},10),fe=o,pe=a)}else{if(!this.options.bubbleScroll||rt(s,!0)===U()){Vt();return}ge(e,this.options,rt(s,!1),!1)}}},Z(n,{pluginName:"scroll",initializeByDefault:!0})}function Vt(){C.forEach(function(n){clearInterval(n.pid)}),C=[]}function Je(){clearInterval(Pt)}var ge=In(function(n,t,e,i){if(t.scroll){var r=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,l=U(),c=!1,u;Ie!==e&&(Ie=e,Vt(),_t=t.scroll,u=t.scrollFn,_t===!0&&(_t=rt(e,!0)));var d=0,m=_t;do{var I=m,y=T(I),E=y.top,G=y.bottom,q=y.left,O=y.right,H=y.width,N=y.height,ot=void 0,Y=void 0,at=I.scrollWidth,wt=I.scrollHeight,k=f(I),St=I.scrollLeft,J=I.scrollTop;I===l?(ot=H<at&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),Y=N<wt&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(ot=H<at&&(k.overflowX==="auto"||k.overflowX==="scroll"),Y=N<wt&&(k.overflowY==="auto"||k.overflowY==="scroll"));var Dt=ot&&(Math.abs(O-r)<=a&&St+H<at)-(Math.abs(q-r)<=a&&!!St),V=Y&&(Math.abs(G-o)<=a&&J+N<wt)-(Math.abs(E-o)<=a&&!!J);if(!C[d])for(var st=0;st<=d;st++)C[st]||(C[st]={});(C[d].vx!=Dt||C[d].vy!=V||C[d].el!==I)&&(C[d].el=I,C[d].vx=Dt,C[d].vy=V,clearInterval(C[d].pid),(Dt!=0||V!=0)&&(c=!0,C[d].pid=setInterval((function(){i&&this.layer===0&&p.active._onTouchMove(te);var xt=C[this.layer].vy?C[this.layer].vy*s:0,tt=C[this.layer].vx?C[this.layer].vx*s:0;typeof u=="function"&&u.call(p.dragged.parentNode[M],tt,xt,n,te,C[this.layer].el)!=="continue"||wn(C[this.layer].el,tt,xt)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&m!==l&&(m=rt(m,!1)));we=c}},30),Pn=function(t){var e=t.originalEvent,i=t.putSortable,r=t.dragEl,o=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=i||o;s();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Fe(){}Fe.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=It(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:Pn};Z(Fe,{pluginName:"revertOnSpill"});function $e(){}$e.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,r=i||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:Pn};Z($e,{pluginName:"removeOnSpill"});p.mount(new jr);p.mount($e,Fe);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v3.0.0-next.88
*/const re=new Set,Br={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function Gr(n){if(Fn(n))return;On(n),re.add(n);const t="id",{group:e,handleSelector:i,dragSelector:r}=n;n.sortable=p.create(n.el,{dataIdAttr:t,...Br,...!!r&&{draggable:r},...!!e&&{group:{name:e,...!!n.canPull&&{pull:(o,a,s,{newIndex:l,oldIndex:c})=>n.canPull({toEl:o.el,fromEl:a.el,dragEl:s,newIndex:l,oldIndex:c})},...!!n.canPut&&{put:(o,a,s,{newIndex:l,oldIndex:c})=>n.canPut({toEl:o.el,fromEl:a.el,dragEl:s,newIndex:l,oldIndex:c})}}},onMove:({from:o,dragged:a,to:s,related:l})=>{n.onDragMove&&n.onDragMove({fromEl:o,dragEl:a,toEl:s,relatedEl:l})},handle:i,filter:`${i}[disabled]`,onStart:({from:o,item:a,to:s,newIndex:l,oldIndex:c})=>{Se.active=!0,Hr(),n.onDragStart({fromEl:o,dragEl:a,toEl:s,newIndex:l,oldIndex:c})},onEnd:({from:o,item:a,to:s,newIndex:l,oldIndex:c})=>{Se.active=!1,zr(),n.onDragEnd({fromEl:o,dragEl:a,toEl:s,newIndex:l,oldIndex:c})},onSort:({from:o,item:a,to:s,newIndex:l,oldIndex:c})=>{n.onDragSort({fromEl:o,dragEl:a,toEl:s,newIndex:l,oldIndex:c})}})}function On(n){var t;Fn(n)||(re.delete(n),(t=n.sortable)==null||t.destroy(),n.sortable=null)}const Se={active:!1};function Fn(n){return n.dragEnabled&&Se.active}function Hr(){Array.from(re).forEach(n=>n.onGlobalDragStart())}function zr(){Array.from(re).forEach(n=>n.onGlobalDragEnd())}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v3.0.0-next.88
*/const et={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text"},Xr=0,me={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},Yr=xe`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,Ur=`${ve}, ${Tt}`,ne=class ne extends Ce{constructor(){super(),this.dragSelector=Tt,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=Gn("mutation",()=>{this.willPerformFilter=!0,this.updateListItems()}),this.updateListItems=nn(()=>{this.updateGroupItems();const{selectionAppearance:t,selectionMode:e,interactionMode:i,dragEnabled:r,el:o,filterEl:a,moveToItems:s,displayMode:l,scale:c}=this,u=Array.from(this.el.querySelectorAll(Tt));if(u.forEach(d=>{d.scale=c,d.selectionAppearance=t,d.selectionMode=e,d.interactionMode=i,d.closest(ke)===o&&(d.moveToItems=s.filter(m=>m.element!==o&&!d.contains(m.element)),d.dragHandle=r,d.displayMode=l)}),this.parentListEl){this.setUpSorting();return}this.listItems=u,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),a&&(a.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(d=>!d.closed&&!d.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(d=>!d.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()},Xr),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.moveToItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.messages=cn({blocking:!0}),this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.calciteInternalListDefaultSlotChange=dt({cancelable:!1}),this.calciteListChange=dt({cancelable:!1}),this.calciteListDragEnd=dt({cancelable:!1}),this.calciteListDragStart=dt({cancelable:!1}),this.calciteListFilter=dt({cancelable:!1}),this.calciteListOrderChange=dt({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(){var t,e;return await an(this),this.filterEnabled?(t=this.filterEl)==null?void 0:t.setFocus():(e=this.focusableItems.find(i=>i.active))==null?void 0:e.setFocus()}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItems(),this.setUpSorting(),this.setParentList(),this.setListItemGroups()}async load(){sn(this),this.handleInteractionModeWarning()}willUpdate(t){(t.has("filterText")||t.has("filterProps")||t.has("filterPredicate"))&&this.performFilter(),(t.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||t.has("group")||t.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||t.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||t.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||t.has("displayMode")&&this.hasUpdated||t.has("scale")&&this.hasUpdated||t.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){rn(this)}loaded(){ln(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),On(this)}handleListItemChange(){this.willPerformFilter=!0,this.updateListItems()}handleCalciteListItemToggle(t){this.parentListEl||(t.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(t){if(this.parentListEl)return;t.stopPropagation();const{focusableItems:e}=this,i=e.findIndex(r=>r.active)-1;e[i]&&this.focusRow(e[i])}handleCalciteInternalListItemActive(t){if(this.parentListEl)return;t.stopPropagation();const e=t.target,{listItems:i}=this;i.forEach(r=>{r.active=r===e})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(t){this.assistiveText=t.detail.message,t.stopPropagation()}handleSortReorder(t){this.parentListEl||this.handleReorder(t)}handleSortMove(t){this.parentListEl||this.handleMove(t)}handleCalciteInternalListItemSelect(t){if(this.parentListEl)return;t.stopPropagation();const e=t.target,{listItems:i,selectionMode:r}=this;e.selected&&(r==="single"||r==="single-persist")&&i.forEach(o=>o.selected=o===e),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(t){if(this.parentListEl)return;t.stopPropagation();const{target:e,detail:i}=t,{focusableItems:r,lastSelectedInfo:o}=this,a=e;if(i.selectMultiple&&o){const s=r.indexOf(a),l=r.indexOf(o.selectedItem),c=Math.min(l,s),u=Math.max(l,s);r.slice(c,u+1).forEach(d=>d.selected=o.selected)}else this.lastSelectedInfo={selectedItem:a,selected:a.selected}}handleCalciteInternalListItemChange(t){this.parentListEl||(t.stopPropagation(),this.updateListItems())}handleCalciteInternalListItemGroupDefaultSlotChange(t){t.stopPropagation()}connectObserver(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var t;(t=this.mutationObserver)==null||t.disconnect()}setUpSorting(){const{dragEnabled:t}=this;t&&Gr(this)}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(t){this.calciteListDragEnd.emit(t)}onDragMove({relatedEl:t}){t.open=!0}onDragStart(t){t.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(t)}onDragSort(t){this.setParentList(),this.updateListItems(),this.calciteListOrderChange.emit(t)}setParentList(){var t;this.parentListEl=(t=this.el.parentElement)==null?void 0:t.closest(ke)}handleDefaultSlotChange(t){Hn(t.target),this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(ve))}handleFilterActionsStartSlotChange(t){this.hasFilterActionsStart=ut(t)}handleFilterActionsEndSlotChange(t){this.hasFilterActionsEnd=ut(t)}handleFilterNoResultsSlotChange(t){this.hasFilterNoResults=ut(t)}setActiveListItem(){const{focusableItems:t}=this;t.some(e=>e.active)||t[0]&&(t[0].active=!0)}async updateSelectedItems(t=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(e=>e.selected),t&&this.calciteListChange.emit()}filterElements({el:t,filteredItems:e,visibleParents:i}){const r=!i.has(t)&&!e.includes(t);t.filterHidden=r;const o=t.parentElement.closest(Ur);o&&(r||i.add(o),this.filterElements({el:o,filteredItems:e,visibleParents:i}))}allParentListItemsOpen(t){var i;const e=(i=t.parentElement)==null?void 0:i.closest(Tt);if(e){if(!e.open)return!1}else return!0;return this.allParentListItemsOpen(e)}borderItems(){const t=this.visibleItems.filter(e=>!e.filterHidden&&this.allParentListItemsOpen(e));t.forEach(e=>e.bordered=e!==t[t.length-1])}updateFilteredItems(){const{visibleItems:t,filteredData:e,filterText:i,filterPredicate:r}=this,o=t==null?void 0:t.filter(l=>t.every(c=>c===l||!l.contains(c))),a=r?t.filter(r):i?e.map(l=>l.el):t||[],s=new WeakSet;o.forEach(l=>this.filterElements({el:l,filteredItems:a,visibleParents:s})),this.filteredItems=a,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:t}=this;t&&(t.filteredItems&&(this.filteredData=t.filteredItems),this.updateListItems())}async filterAndUpdateData(){var t;await((t=this.filterEl)==null?void 0:t.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(t=>t!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:t,filterText:e,effectiveFilterProps:i}=this;t&&(t.value=e,t.filterProps=i,this.filterAndUpdateData())}setFilterEl(t){this.filterEl=t,this.performFilter()}handleFilterChange(t){t.stopPropagation();const{value:e}=t.currentTarget;this.filterText=e,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(t=>({label:t.label,description:t.description,metadata:t.metadata,heading:this.getGroupHeading(t),el:t}))}getGroupHeading(t){return this.listItemGroups.filter(e=>e.contains(t)).map(e=>e.heading)}updateGroupItems(){const{el:t,group:e,scale:i}=this,r=Nn(t),o=e?Array.from(r.querySelectorAll(`calcite-list[group="${e}"]`)).filter(a=>!a.disabled&&a.dragEnabled):[];this.moveToItems=o.map(a=>({element:a,label:a.label??a.id,id:t.id||Xn()})),Array.from(this.el.querySelectorAll(ve)).forEach(a=>{a.scale=i})}focusRow(t){const{focusableItems:e}=this;t&&(e.forEach(i=>i.active=i===t),t.setFocus())}isNavigable(t){var i;const e=(i=t.parentElement)==null?void 0:i.closest(Tt);return e?e.open&&this.isNavigable(e):!0}handleListKeydown(t){var o;if(t.defaultPrevented||this.parentListEl)return;const{key:e}=t,i=this.focusableItems.filter(a=>this.isNavigable(a)),r=i.findIndex(a=>a.active);if(e==="ArrowDown"){t.preventDefault();const a=t.target===this.filterEl?0:r+1;i[a]&&this.focusRow(i[a])}else if(e==="ArrowUp"){if(t.preventDefault(),r===0&&this.filterEnabled){(o=this.filterEl)==null||o.setFocus();return}const a=r-1;i[a]&&this.focusRow(i[a])}else if(e==="Home"){t.preventDefault();const a=i[0];a&&this.focusRow(a)}else if(e==="End"){t.preventDefault();const a=i[i.length-1];a&&this.focusRow(a)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}handleMove(t){const{moveTo:e}=t.detail,i=t.target,r=i==null?void 0:i.parentElement,o=Array.from(r.children).indexOf(i),a=e.element;if(!r)return;i.sortHandleOpen=!1,this.disconnectObserver(),a.prepend(i),zn(i);const s=Array.from(a.children).indexOf(i);this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:i,fromEl:r,toEl:a,newIndex:s,oldIndex:o})}handleReorder(t){const{reorder:e}=t.detail,i=t.target,r=i==null?void 0:i.parentElement;if(!r)return;i.sortHandleOpen=!1;const o=this.filteredItems.filter(u=>u.parentElement===r),a=o.length-1,s=o.indexOf(i);let l=s;switch(e){case"top":l=0;break;case"bottom":l=a;break;case"up":l=s===0?0:s-1;break;case"down":l=s===a?a:s+1;break}this.disconnectObserver();const c=e==="up"||e==="top"?o[l]:o[l].nextSibling;r.insertBefore(i,c),this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:i,fromEl:r,toEl:r,newIndex:l,oldIndex:s})}render(){const{loading:t,label:e,disabled:i,dataForFilter:r,filterEnabled:o,filterPlaceholder:a,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:u,effectiveFilterProps:d}=this;return on({disabled:this.disabled,children:P`<div class=${$(et.container)}>${this.dragEnabled?P`<span aria-live=assertive class=${$(et.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${t?P`<calcite-scrim class=${$(et.scrim)} .loading=${t}></calcite-scrim>`:null}<div .ariaBusy=${t} .ariaLabel=${e||""} class=${$(et.table)} @keydown=${this.handleListKeydown} role=treegrid>${o||c||u?P`<div class=${$(et.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${$(et.stack)}><slot name=${me.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${bt.actionsStart}></slot><calcite-filter .ariaLabel=${a} .disabled=${i} .filterProps=${d} .items=${r} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${a} .scale=${this.scale} .value=${s} ${tn(this.setFilterEl)}></calcite-filter><slot name=${me.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${bt.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${$(et.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${me.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:t,filteredItems:e,parentListEl:i,messages:{_lang:r},numberingSystem:o}=this;return Me.numberFormatOptions={locale:r,numberingSystem:o},i?null:P`<div aria-live=polite class=${$(et.assistiveText)}>${this.hasActiveFilter?Ot("aria-filter-enabled",P`<div>${t.filterEnabled}</div>`):null}${Ot("aria-item-count",P`<div>${t.total.replace("{count}",Me.localize(e.length.toString()))}</div>`)}${e.length?Ot("aria-item-list",P`<ol>${e.map(a=>P`<li>${a.label}</li>`)}</ol>`):null}</div>`}};ne.properties={assistiveText:16,dataForFilter:16,hasFilterActionsEnd:16,hasFilterActionsStart:16,hasFilterNoResults:16,moveToItems:16,hasActiveFilter:16,showNoResultsContainer:16,canPull:0,canPut:0,disabled:7,dragEnabled:7,filterEnabled:7,filterPredicate:0,filterLabel:3,filterPlaceholder:3,filterProps:0,filterText:3,filteredData:0,filteredItems:0,group:3,interactionMode:3,label:1,loading:7,messageOverrides:0,displayMode:3,numberingSystem:1,scale:3,selectedItems:0,selectionAppearance:3,selectionMode:3},ne.styles=Yr;let De=ne;Te("calcite-list",De);export{De as List};
