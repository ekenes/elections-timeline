import{bo as s}from"./index-c2b82012.js";import{n as i}from"./WGLContainer-2b88a075.js";import{p as r}from"./BitmapTechnique-d210a3c4.js";class o extends i{constructor(){super(...arguments),this._hasCrossfade=!1,this._bitmapTechnique=null}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}onAttach(){super.onAttach(),this._bitmapTechnique=new r}onDetach(){var e;super.onDetach(),(e=this._bitmapTechnique)==null||e.shutdown(),this._bitmapTechnique=null}doRender(e){if(!this.visible||e.drawPhase!==s.MAP||!this._bitmapTechnique)return;super.doRender(e);const t=this.children;this._bitmapTechnique.render(e,{bitmaps:t})}_manageFade(){this.children.reduce((e,t)=>e+(t.inFadeTransition?1:0),0)>=2?(this.children.forEach(e=>e.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(e=>e.blendFunction="standard"),this._hasCrossfade=!1)}}export{o as t};
