{"version":3,"file":"webStyleSymbolUtils-05bf89d1.js","sources":["../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import l from\"../../core/Error.js\";import{urlToObject as o,removeFile as n}from\"../../core/urlUtils.js\";import s from\"../../portal/Portal.js\";import{f as m}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as i}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{fetchStyle as u,requestJSON as p,makeCIMSymbolRef as f,Style2DUrlTemplate as y,symbolUrlFromStyleItem as c}from\"./styleUtils.js\";import{Thumbnail as b}from\"./Thumbnail.js\";function g(t,e,r,o){const n=t.name;return null==n?Promise.reject(new l(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName?d(n,e,o):u(t,e,o).then((t=>h(t,n,e,r,c,o)))}function j(t,e){return e.items.find((e=>e.name===t))}function h(u,y,c,g,h,d){const U=null!=c?.portal?c.portal:s.getDefault(),N={portal:U,url:o(u.baseUrl),origin:\"portal-item\"},w=j(y,u.data);if(!w){const t=`The symbol name '${y}' could not be found`;return Promise.reject(new l(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:y}))}let S=m(h(w,g),N),D=w.thumbnail?.href??null;const O=w.thumbnail?.imageData;e()&&(S=r(S)??\"\",D=r(D));const P={portal:U,url:o(n(S)),origin:\"portal-item\"};return p(S,d).then((e=>{const r=\"cimRef\"===g?f(e.data):e.data,l=i(r,P);if(l&&t(l)){if(D){const t=m(D,N);l.thumbnail=new b({url:t})}else O&&(l.thumbnail=new b({url:`data:image/png;base64,${O}`}));u.styleUrl?l.styleOrigin=new a({portal:c.portal,styleUrl:u.styleUrl,name:y}):u.styleName&&(l.styleOrigin=new a({portal:c.portal,styleName:u.styleName,name:y}))}return l}))}function d(t,e,r){const l=y.replaceAll(/\\{SymbolName\\}/gi,t),m=null!=e.portal?e.portal:s.getDefault();return p(l,r).then((t=>{const e=f(t.data);return i(e,{portal:m,url:o(n(l)),origin:\"portal-item\"})}))}export{h as fetchSymbolFromStyle,j as getStyleItemFromStyle,g as resolveWebStyleSymbol};\n"],"names":["g","t","e","r","o","l","d","u","h","c","j","y","U","s","N","w","S","m","D","_a","O","_b","P","n","p","f","i","b","a"],"mappings":"2MAI8kB,SAASA,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,CAAC,MAAM,EAAEH,EAAE,KAAK,OAAa,GAAN,KAAQ,QAAQ,OAAO,IAAII,EAAE,uDAAuD,wCAAwC,CAAC,EAAEJ,EAAE,WAAuCA,EAAE,YAA9B,0BAAwCK,EAAE,EAAEJ,EAAEE,CAAC,EAAEG,EAAEN,EAAEC,EAAEE,CAAC,EAAE,KAAMH,GAAGO,EAAEP,EAAE,EAAEC,EAAEC,EAAEM,EAAEL,CAAC,CAAC,CAAE,CAAC,SAASM,EAAET,EAAEC,EAAE,CAAC,OAAOA,EAAE,MAAM,KAAMA,GAAGA,EAAE,OAAOD,CAAG,CAAA,CAAC,SAASO,EAAED,EAAEI,EAAEF,EAAET,EAAEQ,EAAEF,EAAE,SAAC,MAAMM,GAAQH,GAAAA,YAAAA,EAAG,SAAT,KAAgBA,EAAE,OAAOI,EAAE,WAAY,EAACC,EAAE,CAAC,OAAOF,EAAE,IAAIR,EAAEG,EAAE,OAAO,EAAE,OAAO,aAAa,EAAEQ,EAAEL,EAAEC,EAAEJ,EAAE,IAAI,EAAE,GAAG,CAACQ,EAAE,CAAC,MAAMd,EAAE,oBAAoBU,CAAC,uBAAuB,OAAO,QAAQ,OAAO,IAAIN,EAAE,yCAAyCJ,EAAE,CAAC,WAAWU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAIK,EAAEC,EAAET,EAAEO,EAAEf,CAAC,EAAEc,CAAC,EAAEI,IAAEC,EAAAJ,EAAE,YAAF,YAAAI,EAAa,OAAM,KAAK,MAAMC,GAAEC,EAAAN,EAAE,YAAF,YAAAM,EAAa,UAAUnB,EAAC,IAAKc,EAAEb,EAAEa,CAAC,GAAG,GAAGE,EAAEf,EAAEe,CAAC,GAAG,MAAMI,EAAE,CAAC,OAAOV,EAAE,IAAIR,EAAEmB,EAAEP,CAAC,CAAC,EAAE,OAAO,aAAa,EAAE,OAAOQ,EAAER,EAAEV,CAAC,EAAE,KAAMJ,GAAG,CAAC,MAAMC,EAAaH,IAAX,SAAayB,EAAEvB,EAAE,IAAI,EAAEA,EAAE,KAAKG,EAAEqB,EAAEvB,EAAEmB,CAAC,EAAE,GAAGjB,GAAGJ,EAAEI,CAAC,EAAE,CAAC,GAAGa,EAAE,CAAC,MAAMjB,EAAEgB,EAAEC,EAAEJ,CAAC,EAAET,EAAE,UAAU,IAAIsB,EAAE,CAAC,IAAI1B,CAAC,CAAC,CAAC,MAAMmB,IAAIf,EAAE,UAAU,IAAIsB,EAAE,CAAC,IAAI,yBAAyBP,CAAC,EAAE,CAAC,GAAGb,EAAE,SAASF,EAAE,YAAY,IAAIuB,EAAE,CAAC,OAAOnB,EAAE,OAAO,SAASF,EAAE,SAAS,KAAKI,CAAC,CAAC,EAAEJ,EAAE,YAAYF,EAAE,YAAY,IAAIuB,EAAE,CAAC,OAAOnB,EAAE,OAAO,UAAUF,EAAE,UAAU,KAAKI,CAAC,CAAC,EAAE,CAAC,OAAON,CAAC,CAAC,CAAE,CAAC,SAASC,EAAEL,EAAEC,EAAEC,EAAE,CAAC,MAAME,EAAEM,EAAE,WAAW,mBAAmBV,CAAC,EAAEgB,EAAQf,EAAE,QAAR,KAAeA,EAAE,OAAOW,EAAE,WAAU,EAAG,OAAOW,EAAEnB,EAAEF,CAAC,EAAE,KAAMF,GAAG,CAAC,MAAMC,EAAEuB,EAAExB,EAAE,IAAI,EAAE,OAAOyB,EAAExB,EAAE,CAAC,OAAOe,EAAE,IAAIb,EAAEmB,EAAElB,CAAC,CAAC,EAAE,OAAO,aAAa,CAAC,CAAC,CAAG,CAAA","x_google_ignoreList":[0]}