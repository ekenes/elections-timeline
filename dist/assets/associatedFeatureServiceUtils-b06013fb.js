import{_ as e,p as E,s as y,ao as m,ap as T,d1 as d,U as c,bh as D}from"./index-7df220b7.js";const V={BingMapsLayer:async()=>(await e(()=>import("./BingMapsLayer-99c9e283.js"),["assets/BingMapsLayer-99c9e283.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/imageBitmapUtils-0d3b80a1.js"])).default,BuildingSceneLayer:async()=>(await e(()=>import("./BuildingSceneLayer-8c585767.js"),["assets/BuildingSceneLayer-8c585767.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/I3SUtil-c9742b2b.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quat-8d5872f5.js","assets/quatf64-3363c48e.js","assets/spatialReferenceEllipsoidUtils-78b0f61e.js","assets/I3SBinaryReader-26ef99cf.js","assets/VertexAttribute-0e674613.js","assets/orientedBoundingBox-0bfb7428.js","assets/plane-9393aa09.js","assets/sphere-57cc5d4e.js","assets/ByteSizeUnit-d4757d40.js","assets/SceneService-2bf77bae.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/saveAPIKeyUtils-9cce0528.js","assets/saveUtils-12f5bd82.js","assets/resourceUtils-e26cab63.js","assets/I3SLayerDefinitions-a7c070bf.js","assets/popupUtils-137e2249.js","assets/elevationInfoUtils-aaffd559.js"])).default,CSVLayer:async()=>(await e(()=>import("./CSVLayer-65551ba0.js"),["assets/CSVLayer-65551ba0.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/clientSideDefaults-0ebeb30d.js","assets/QueryEngineCapabilities-85c4f1d0.js"])).default,DimensionLayer:async()=>(await e(()=>import("./DimensionLayer-a06a5f3b.js"),["assets/DimensionLayer-a06a5f3b.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/Analysis-62e67047.js"])).default,ElevationLayer:async()=>(await e(()=>import("./ElevationLayer-d691e95e.js"),["assets/ElevationLayer-d691e95e.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/ArcGISCachedService-a0740898.js","assets/TileInfoTilemapCache-e92c5202.js","assets/TilemapCache-1df25e67.js","assets/ByteSizeUnit-d4757d40.js"])).default,FeatureLayer:async()=>(await e(()=>import("./index-7df220b7.js").then(a=>a.mu),["assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,GeoJSONLayer:async()=>(await e(()=>import("./GeoJSONLayer-888a5cb4.js"),["assets/GeoJSONLayer-888a5cb4.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/clientSideDefaults-0ebeb30d.js","assets/QueryEngineCapabilities-85c4f1d0.js"])).default,GeoRSSLayer:async()=>(await e(()=>import("./GeoRSSLayer-70f3c521.js"),["assets/GeoRSSLayer-70f3c521.js","assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,GroupLayer:async()=>(await e(()=>import("./GroupLayer-9b4e6e22.js"),["assets/GroupLayer-9b4e6e22.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/saveUtils-12f5bd82.js","assets/resourceUtils-e26cab63.js"])).default,ImageryLayer:async()=>(await e(()=>import("./ImageryLayer-94961b58.js"),["assets/ImageryLayer-94961b58.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/ImageHistogramParameters-271239a7.js","assets/multidimensionalUtils-faf6f60a.js","assets/dataUtils-221506c9.js","assets/RasterSymbolizer-ba91f88c.js","assets/colorUtils-f85ceb08.js","assets/utils-d478ea4f.js","assets/utils-fa2983ac.js","assets/generateRendererUtils-0936b13c.js","assets/imageBitmapUtils-0d3b80a1.js","assets/executeQueryJSON-76aa4742.js","assets/query-fdfcc742.js","assets/pbfQueryUtils-dcc91ddc.js","assets/pbf-3727d532.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/featureConversionUtils-7b0c7dc1.js","assets/AttachmentInfo-b2234ad8.js","assets/executeForIds-0253699b.js"])).default,ImageryTileLayer:async()=>(await e(()=>import("./ImageryTileLayer-80451023.js"),["assets/ImageryTileLayer-80451023.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/ImageHistogramParameters-271239a7.js","assets/multidimensionalUtils-faf6f60a.js","assets/dataUtils-221506c9.js","assets/RasterSymbolizer-ba91f88c.js","assets/colorUtils-f85ceb08.js","assets/utils-d478ea4f.js","assets/utils-fa2983ac.js","assets/generateRendererUtils-0936b13c.js","assets/RawBlockCache-86eab547.js","assets/rasterProjectionHelper-2e28f48b.js","assets/utils-c7a8e4f9.js","assets/TilemapCache-1df25e67.js","assets/ByteSizeUnit-d4757d40.js"])).default,IntegratedMeshLayer:async()=>(await e(()=>import("./IntegratedMeshLayer-c7a2a824.js"),["assets/IntegratedMeshLayer-c7a2a824.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/persistable-25cff709.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f1f279b0.js","assets/SceneService-2bf77bae.js","assets/originUtils-cfe4feaf.js","assets/saveAPIKeyUtils-9cce0528.js","assets/saveUtils-12f5bd82.js","assets/resourceUtils-e26cab63.js","assets/I3SLayerDefinitions-a7c070bf.js","assets/elevationInfoUtils-aaffd559.js"])).default,KMLLayer:async()=>(await e(()=>import("./KMLLayer-13de4a12.js"),["assets/KMLLayer-13de4a12.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/kmlUtils-fd249cbb.js"])).default,LineOfSightLayer:async()=>(await e(()=>import("./LineOfSightLayer-0c86f7f0.js"),["assets/LineOfSightLayer-0c86f7f0.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/Analysis-62e67047.js","assets/persistable-25cff709.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-f1f279b0.js","assets/elevationInfoUtils-aaffd559.js"])).default,LinkChartLayer:async()=>(await e(()=>import("./LinkChartLayer-2b432def.js"),["assets/LinkChartLayer-2b432def.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/geohashUtils-77d8429b.js","assets/featureConversionUtils-7b0c7dc1.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureStore-7e64962e.js","assets/BoundsStore-9e29f6ec.js","assets/PooledRBush-583892f5.js","assets/timeSupport-4bdd420f.js","assets/projectionSupport-6fc81d1e.js","assets/json-48e3ea08.js","assets/QueryEngine-cb7b4d05.js","assets/WhereClause-83bbd87c.js","assets/TimeOnly-094f602b.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-6260a1a7.js","assets/utils-a81802ba.js","assets/utils-a1f7a94c.js","assets/generateRendererUtils-0936b13c.js","assets/RenderState-1d6218ee.js","assets/clientSideDefaults-0ebeb30d.js"])).default,MapImageLayer:async()=>(await e(()=>import("./MapImageLayer-136efc36.js"),["assets/MapImageLayer-136efc36.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/scaleUtils-32de8df1.js","assets/SublayersOwner-7e8c6f42.js","assets/QueryTask-0ade8a2a.js","assets/executeForIds-0253699b.js","assets/query-fdfcc742.js","assets/pbfQueryUtils-dcc91ddc.js","assets/pbf-3727d532.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryJSON-76aa4742.js","assets/executeQueryPBF-2c6a92a0.js","assets/featureConversionUtils-7b0c7dc1.js","assets/sublayerUtils-0fc248e7.js","assets/ExportImageParameters-55fc6898.js","assets/floorFilterUtils-080a7cd2.js","assets/imageBitmapUtils-0d3b80a1.js"])).default,MapNotesLayer:async()=>(await e(()=>import("./MapNotesLayer-ce83bf01.js"),["assets/MapNotesLayer-ce83bf01.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/GraphicsLayer-4ac4f491.js","assets/objectIdUtils-789e911a.js"])).default,MediaLayer:async()=>(await e(()=>import("./MediaLayer-109da427.js"),["assets/MediaLayer-109da427.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/imageUtils-2740bb3b.js","assets/perspectiveUtils-9530286d.js","assets/normalizeUtilsSync-06a11b6b.js","assets/mat3f64-221ce671.js","assets/resourceExtension-f1f279b0.js","assets/BoundsStore-9e29f6ec.js","assets/PooledRBush-583892f5.js"])).default,OGCFeatureLayer:async()=>(await e(()=>import("./OGCFeatureLayer-a1e1c2cf.js"),["assets/OGCFeatureLayer-a1e1c2cf.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/ogcFeatureUtils-94f3b7d7.js","assets/featureConversionUtils-7b0c7dc1.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/geojson-a0fc85ec.js","assets/date-d60e9730.js","assets/clientSideDefaults-0ebeb30d.js","assets/QueryEngineCapabilities-85c4f1d0.js"])).default,OpenStreetMapLayer:async()=>(await e(()=>import("./OpenStreetMapLayer-c538311b.js"),["assets/OpenStreetMapLayer-c538311b.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/WebTileLayer-d3c48843.js","assets/imageBitmapUtils-0d3b80a1.js"])).default,OrientedImageryLayer:async()=>(await e(()=>import("./OrientedImageryLayer-a1cd4ae1.js"),["assets/OrientedImageryLayer-a1cd4ae1.js","assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,PointCloudLayer:async()=>(await e(()=>import("./PointCloudLayer-5887d89e.js"),["assets/PointCloudLayer-5887d89e.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/SceneService-2bf77bae.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/saveAPIKeyUtils-9cce0528.js","assets/saveUtils-12f5bd82.js","assets/resourceUtils-e26cab63.js","assets/PointCloudUniqueValueRenderer-36cd1be0.js","assets/elevationInfoUtils-aaffd559.js"])).default,RouteLayer:async()=>(await e(()=>import("./RouteLayer-d9556f7f.js"),["assets/RouteLayer-d9556f7f.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/Stop-9b1145a9.js"])).default,SceneLayer:async()=>(await e(()=>import("./SceneLayer-147a25ac.js"),["assets/SceneLayer-147a25ac.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/SceneService-2bf77bae.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/saveAPIKeyUtils-9cce0528.js","assets/saveUtils-12f5bd82.js","assets/resourceUtils-e26cab63.js","assets/I3SUtil-c9742b2b.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quat-8d5872f5.js","assets/quatf64-3363c48e.js","assets/spatialReferenceEllipsoidUtils-78b0f61e.js","assets/I3SBinaryReader-26ef99cf.js","assets/VertexAttribute-0e674613.js","assets/orientedBoundingBox-0bfb7428.js","assets/plane-9393aa09.js","assets/sphere-57cc5d4e.js","assets/ByteSizeUnit-d4757d40.js","assets/I3SLayerDefinitions-a7c070bf.js","assets/persistable-25cff709.js","assets/resourceExtension-f1f279b0.js","assets/elevationInfoUtils-aaffd559.js","assets/popupUtils-137e2249.js"])).default,StreamLayer:async()=>(await e(()=>import("./StreamLayer-62b28140.js"),["assets/StreamLayer-62b28140.js","assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,SubtypeGroupLayer:async()=>(await e(()=>import("./SubtypeGroupLayer-c57ab183.js"),["assets/SubtypeGroupLayer-c57ab183.js","assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,TileLayer:async()=>(await e(()=>import("./TileLayer-bfd9152e.js"),["assets/TileLayer-bfd9152e.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/ArcGISCachedService-a0740898.js","assets/TileInfoTilemapCache-e92c5202.js","assets/TilemapCache-1df25e67.js","assets/ByteSizeUnit-d4757d40.js","assets/SublayersOwner-7e8c6f42.js","assets/QueryTask-0ade8a2a.js","assets/executeForIds-0253699b.js","assets/query-fdfcc742.js","assets/pbfQueryUtils-dcc91ddc.js","assets/pbf-3727d532.js","assets/OptimizedGeometry-d94e541f.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryJSON-76aa4742.js","assets/executeQueryPBF-2c6a92a0.js","assets/featureConversionUtils-7b0c7dc1.js","assets/sublayerUtils-0fc248e7.js","assets/imageBitmapUtils-0d3b80a1.js"])).default,UnknownLayer:async()=>(await e(()=>import("./UnknownLayer-415e5313.js"),["assets/UnknownLayer-415e5313.js","assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,UnsupportedLayer:async()=>(await e(()=>import("./UnsupportedLayer-7aad0b59.js"),["assets/UnsupportedLayer-7aad0b59.js","assets/index-7df220b7.js","assets/index-0e712e80.css"])).default,VectorTileLayer:async()=>(await e(()=>import("./VectorTileLayer-63db9662.js"),["assets/VectorTileLayer-63db9662.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/ArcGISCachedService-a0740898.js","assets/TileInfoTilemapCache-e92c5202.js","assets/TilemapCache-1df25e67.js","assets/ByteSizeUnit-d4757d40.js","assets/jsonContext-28b69568.js","assets/StyleRepository-ffb462da.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/enums-fb086c25.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-f85ceb08.js","assets/GeometryUtils-984e8446.js","assets/definitions-0ff99485.js"])).default,VoxelLayer:async()=>(await e(()=>import("./VoxelLayer-82842bb1.js"),["assets/VoxelLayer-82842bb1.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/SceneService-2bf77bae.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/saveAPIKeyUtils-9cce0528.js","assets/saveUtils-12f5bd82.js","assets/resourceUtils-e26cab63.js","assets/persistable-25cff709.js","assets/resourceExtension-f1f279b0.js","assets/quat-8d5872f5.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js"])).default,WFSLayer:async()=>(await e(()=>import("./WFSLayer-89ac0731.js"),["assets/WFSLayer-89ac0731.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/clientSideDefaults-0ebeb30d.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/wfsUtils-d210dbf6.js","assets/geojson-a0fc85ec.js","assets/date-d60e9730.js","assets/OptimizedGeometry-d94e541f.js","assets/xmlUtils-444cb4c0.js"])).default,WMSLayer:async()=>(await e(()=>import("./WMSLayer-03dc39ab.js"),["assets/WMSLayer-03dc39ab.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/scaleUtils-32de8df1.js","assets/crsUtils-3bab3d8c.js","assets/ExportWMSImageParameters-4b93ddcd.js","assets/imageBitmapUtils-0d3b80a1.js"])).default,WMTSLayer:async()=>(await e(()=>import("./WMTSLayer-8ed09b15.js"),["assets/WMTSLayer-8ed09b15.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/WebTileLayer-d3c48843.js","assets/imageBitmapUtils-0d3b80a1.js","assets/TileInfoTilemapCache-e92c5202.js","assets/crsUtils-3bab3d8c.js","assets/xmlUtils-444cb4c0.js"])).default,WebTileLayer:async()=>(await e(()=>import("./WebTileLayer-d3c48843.js").then(a=>a.W),["assets/WebTileLayer-d3c48843.js","assets/index-7df220b7.js","assets/index-0e712e80.css","assets/imageBitmapUtils-0d3b80a1.js"])).default};async function h(a,n){const i=E(a);if(!i)throw new y("invalid-url","Invalid scene service url");const t={...n,sceneServerUrl:i.url.path,layerId:i.sublayer??void 0};if(t.sceneLayerItem??(t.sceneLayerItem=await O(t)),t.sceneLayerItem==null)return f(t.sceneServerUrl.replace("/SceneServer","/FeatureServer"),t);const r=await P(t);if(!(r!=null&&r.url))throw new y("related-service-not-found","Could not find feature service through portal item relationship");const u=await f(r.url,t);return u.portalItem=r,u}async function O(a){const n=(await v(a)).serviceItemId;if(!n)return null;const i=new m({id:n,apiKey:a.apiKey}),t=await A(a);t!=null&&(i.portal=new T({url:t}));try{return i.load({signal:a.signal})}catch(r){return d(r),null}}async function v(a){if(a.rootDocument)return a.rootDocument;const n={query:{f:"json",token:a.apiKey},responseType:"json",signal:a.signal};try{const i=await c(a.sceneServerUrl,n);a.rootDocument=i.data}catch{a.rootDocument={}}return a.rootDocument}async function A(a){var t;const n=(t=D)==null?void 0:t.findServerInfo(a.sceneServerUrl);if(n!=null&&n.owningSystemUrl)return n.owningSystemUrl;const i=a.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await c(i,{query:{f:"json"},responseType:"json",signal:a.signal})).data.owningSystemUrl;if(r)return r}catch(r){d(r)}return null}async function f(a,n){const i=E(a);if(!i)throw new y("invalid-feature-service-url","Invalid feature service url");const t=i.url.path,r=n.layerId;if(r==null)return{serverUrl:t};const u=v(n),p=_=>{const I={query:{f:"json"},responseType:"json",authMode:_,signal:n.signal};return c(t,I)},w=p("anonymous").catch(()=>p("no-prompt")),[L,s]=await Promise.all([w,u]),l=s==null?void 0:s.layers,o=L.data&&L.data.layers;if(!Array.isArray(o))throw new Error("expected layers array");if(Array.isArray(l)){for(let _=0;_<Math.min(l.length,o.length);_++)if(l[_].id===r)return{serverUrl:t,layerId:o[_].id}}else if(r!=null&&r<o.length)return{serverUrl:t,layerId:o[r].id};throw new Error("could not find matching associated sublayer")}async function P({sceneLayerItem:a,signal:n}){if(!a)return null;try{const i=(await a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:n})).find(r=>r.type==="Feature Service")||null;if(!i)return null;const t=new m({portal:i.portal,id:i.id});return await t.load(),t}catch(i){return d(i),null}}export{V as a,h as l};
