{"version":3,"file":"rasterizingUtils-ed11e8c3.js","sources":["../../node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as o}from\"../../core/floatRGBA.js\";import{nextPowerOfTwo as t}from\"../../core/mathUtils.js\";import{dashRadius as a}from\"./constants.js\";const r=o=>\"vertical\"===o||\"horizontal\"===o||\"cross\"===o||\"esriSFSCross\"===o||\"esriSFSVertical\"===o||\"esriSFSHorizontal\"===o;function e(o,a,e){const i=a.style,n=t(Math.ceil(e)),s=r(i)?8*n:16*n,l=2*n;o.width=s,o.height=s;const h=o.getContext(\"2d\");h.strokeStyle=\"#FFFFFF\",h.lineWidth=n,h.beginPath(),\"vertical\"!==i&&\"cross\"!==i&&\"esriSFSCross\"!==i&&\"esriSFSVertical\"!==i||(h.moveTo(s/2,-l),h.lineTo(s/2,s+l)),\"horizontal\"!==i&&\"cross\"!==i&&\"esriSFSCross\"!==i&&\"esriSFSHorizontal\"!==i||(h.moveTo(-l,s/2),h.lineTo(s+l,s/2)),\"backward-diagonal\"!==i&&\"diagonal-cross\"!==i&&\"esriSFSDiagonalCross\"!==i&&\"esriSFSBackwardDiagonal\"!==i||(h.moveTo(-l,-l),h.lineTo(s+l,s+l),h.moveTo(s-l,-l),h.lineTo(s+l,l),h.moveTo(-l,s-l),h.lineTo(l,s+l)),\"forward-diagonal\"!==i&&\"diagonal-cross\"!==i&&\"esriSFSForwardDiagonal\"!==i&&\"esriSFSDiagonalCross\"!==i||(h.moveTo(s+l,-l),h.lineTo(-l,s+l),h.moveTo(l,-l),h.lineTo(-l,l),h.moveTo(s+l,s-l),h.lineTo(s-l,s+l)),h.stroke();const c=h.getImageData(0,0,o.width,o.height),m=new Uint8Array(c.data);let S;for(let t=0;t<m.length;t+=4)S=m[t+3]/255,m[t]=m[t]*S,m[t+1]=m[t+1]*S,m[t+2]=m[t+2]*S;return[m,o.width,o.height,n]}function i(t,r){null==t&&(t=[]);const e=\"Butt\"===r,i=\"Square\"===r,n=!e&&!i;t.length%2==1&&(t=[...t,...t]);const s=a,l=2*s;let h=0;for(const o of t)h+=o;const c=Math.round(h*s),m=new Float32Array(c*l),S=.5*s;let F=0,g=0,T=.5,d=!0;for(const o of t){for(F=g,g+=o*s;T<=g;){let o=.5;for(;o<l;){const t=(o-.5)*c+T-.5,a=n?(o-s)*(o-s):Math.abs(o-s);m[t]=d?e?Math.max(Math.max(F+S-T,a),Math.max(T-g+S,a)):a:n?Math.min((T-F)*(T-F)+a,(T-g)*(T-g)+a):i?Math.min(Math.max(T-F,a),Math.max(g-T,a)):Math.min(Math.max(T-F+S,a),Math.max(g+S-T,a)),o++}T++}d=!d}const f=m.length,M=new Uint8Array(4*f);for(let a=0;a<f;++a){const t=(n?Math.sqrt(m[a]):m[a])/s;o(t,M,4*a)}return[M,c,l]}export{i as rasterizeDash,e as rasterizeFillStyle};\n"],"names":["r","o","e","a","i","n","t","s","l","h","c","m","S","F","g","T","d","f","M"],"mappings":"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","x_google_ignoreList":[0]}