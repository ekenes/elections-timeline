import{_ as e,p as E,s as l,aq as m,ar as T,cF as y,W as d,b8 as D}from"./index-10102046.js";const V={BingMapsLayer:async()=>(await e(()=>import("./BingMapsLayer-5ffa966f.js"),["assets/BingMapsLayer-5ffa966f.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/imageBitmapUtils-28d567dd.js"])).default,BuildingSceneLayer:async()=>(await e(()=>import("./BuildingSceneLayer-6d332747.js"),["assets/BuildingSceneLayer-6d332747.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/I3SUtil-4e0eb5a0.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quat-a1c1817e.js","assets/quatf64-3363c48e.js","assets/spatialReferenceEllipsoidUtils-27912cea.js","assets/I3SBinaryReader-b6044d39.js","assets/VertexAttribute-be58f9a2.js","assets/orientedBoundingBox-c73f99d8.js","assets/plane-6c3da9bf.js","assets/sphere-cb6d12c4.js","assets/ByteSizeUnit-d4757d40.js","assets/SceneService-9cb6bde2.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceUtils-2545fe59.js","assets/I3SLayerDefinitions-e9e82b80.js","assets/popupUtils-47831f6c.js","assets/elevationInfoUtils-c2569e00.js"])).default,CSVLayer:async()=>(await e(()=>import("./CSVLayer-ec0cbba2.js"),["assets/CSVLayer-ec0cbba2.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/clientSideDefaults-54fd22ba.js","assets/QueryEngineCapabilities-85c4f1d0.js"])).default,DimensionLayer:async()=>(await e(()=>import("./DimensionLayer-2304b028.js"),["assets/DimensionLayer-2304b028.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/Analysis-507424fb.js"])).default,ElevationLayer:async()=>(await e(()=>import("./ElevationLayer-1ee4ee5e.js"),["assets/ElevationLayer-1ee4ee5e.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/ArcGISCachedService-d6d43973.js","assets/TileInfoTilemapCache-4a62f9f0.js","assets/TilemapCache-563a0d34.js","assets/ByteSizeUnit-d4757d40.js"])).default,FeatureLayer:async()=>(await e(()=>import("./index-10102046.js").then(a=>a.md),["assets/index-10102046.js","assets/index-0e712e80.css"])).default,GeoJSONLayer:async()=>(await e(()=>import("./GeoJSONLayer-adca5ab6.js"),["assets/GeoJSONLayer-adca5ab6.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/clientSideDefaults-54fd22ba.js","assets/QueryEngineCapabilities-85c4f1d0.js"])).default,GeoRSSLayer:async()=>(await e(()=>import("./GeoRSSLayer-3d144271.js"),["assets/GeoRSSLayer-3d144271.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,GroupLayer:async()=>(await e(()=>import("./GroupLayer-a44dbff5.js"),["assets/GroupLayer-a44dbff5.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,ImageryLayer:async()=>(await e(()=>import("./ImageryLayer-261e0977.js"),["assets/ImageryLayer-261e0977.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/ImageHistogramParameters-a9560c1a.js","assets/multidimensionalUtils-e00e24c5.js","assets/dataUtils-170218e3.js","assets/RasterSymbolizer-43d67a0b.js","assets/colorUtils-f8ed144f.js","assets/utils-b6b632d4.js","assets/utils-123f6331.js","assets/generateRendererUtils-5add6e8e.js","assets/imageBitmapUtils-28d567dd.js","assets/executeQueryJSON-ce8281b8.js","assets/query-ee1dd75d.js","assets/pbfQueryUtils-77b7e0c7.js","assets/pbf-43b1a242.js","assets/OptimizedGeometry-33b2eb0d.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/featureConversionUtils-1947fb7d.js","assets/AttachmentInfo-de9b706b.js","assets/executeForIds-64785e03.js"])).default,ImageryTileLayer:async()=>(await e(()=>import("./ImageryTileLayer-4c1299db.js"),["assets/ImageryTileLayer-4c1299db.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/ImageHistogramParameters-a9560c1a.js","assets/multidimensionalUtils-e00e24c5.js","assets/dataUtils-170218e3.js","assets/RasterSymbolizer-43d67a0b.js","assets/colorUtils-f8ed144f.js","assets/utils-b6b632d4.js","assets/utils-123f6331.js","assets/generateRendererUtils-5add6e8e.js","assets/RawBlockCache-fc270bed.js","assets/rasterProjectionHelper-eee03db7.js","assets/utils-98bb7c2d.js","assets/TilemapCache-563a0d34.js","assets/ByteSizeUnit-d4757d40.js"])).default,IntegratedMeshLayer:async()=>(await e(()=>import("./IntegratedMeshLayer-8f7fa121.js"),["assets/IntegratedMeshLayer-8f7fa121.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/persistable-5e59bf6a.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-b49d1bed.js","assets/SceneService-9cb6bde2.js","assets/originUtils-1469eeaf.js","assets/resourceUtils-2545fe59.js","assets/I3SLayerDefinitions-e9e82b80.js","assets/elevationInfoUtils-c2569e00.js"])).default,KMLLayer:async()=>(await e(()=>import("./KMLLayer-a3ec153a.js"),["assets/KMLLayer-a3ec153a.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/kmlUtils-1ad4e5c3.js"])).default,LineOfSightLayer:async()=>(await e(()=>import("./LineOfSightLayer-7545668c.js"),["assets/LineOfSightLayer-7545668c.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/Analysis-507424fb.js","assets/persistable-5e59bf6a.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceExtension-b49d1bed.js","assets/elevationInfoUtils-c2569e00.js"])).default,LinkChartLayer:async()=>(await e(()=>import("./LinkChartLayer-3dcb2802.js"),["assets/LinkChartLayer-3dcb2802.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/geohashUtils-77d8429b.js","assets/featureConversionUtils-1947fb7d.js","assets/OptimizedGeometry-33b2eb0d.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/FeatureStore-fb72aa54.js","assets/BoundsStore-e92ff86f.js","assets/PooledRBush-d699d024.js","assets/timeSupport-8e81296f.js","assets/projectionSupport-d273ebf8.js","assets/json-48e3ea08.js","assets/QueryEngine-f7f8defb.js","assets/WhereClause-0f24bbde.js","assets/TimeOnly-7709534d.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-64099a94.js","assets/utils-ac2051b8.js","assets/generateRendererUtils-5add6e8e.js","assets/clientSideDefaults-54fd22ba.js"])).default,MapImageLayer:async()=>(await e(()=>import("./MapImageLayer-0af692f5.js"),["assets/MapImageLayer-0af692f5.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/scaleUtils-5b540a2c.js","assets/SublayersOwner-af8c2aef.js","assets/QueryTask-5c9128f1.js","assets/executeForIds-64785e03.js","assets/query-ee1dd75d.js","assets/pbfQueryUtils-77b7e0c7.js","assets/pbf-43b1a242.js","assets/OptimizedGeometry-33b2eb0d.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryJSON-ce8281b8.js","assets/executeQueryPBF-a840aa56.js","assets/featureConversionUtils-1947fb7d.js","assets/sublayerUtils-6e281769.js","assets/ExportImageParameters-4b246449.js","assets/floorFilterUtils-080a7cd2.js","assets/imageBitmapUtils-28d567dd.js"])).default,MapNotesLayer:async()=>(await e(()=>import("./MapNotesLayer-0e1f84c0.js"),["assets/MapNotesLayer-0e1f84c0.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/GraphicsLayer-fd4392e3.js","assets/objectIdUtils-789e911a.js"])).default,MediaLayer:async()=>(await e(()=>import("./MediaLayer-0138843b.js"),["assets/MediaLayer-0138843b.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/imageUtils-6f5ef517.js","assets/perspectiveUtils-a47142ff.js","assets/normalizeUtilsSync-0204c636.js","assets/mat3f64-221ce671.js","assets/resourceExtension-b49d1bed.js","assets/BoundsStore-e92ff86f.js","assets/PooledRBush-d699d024.js"])).default,OGCFeatureLayer:async()=>(await e(()=>import("./OGCFeatureLayer-22920b04.js"),["assets/OGCFeatureLayer-22920b04.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/ogcFeatureUtils-2d153003.js","assets/featureConversionUtils-1947fb7d.js","assets/OptimizedGeometry-33b2eb0d.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/geojson-640ee4a0.js","assets/clientSideDefaults-54fd22ba.js","assets/QueryEngineCapabilities-85c4f1d0.js"])).default,OpenStreetMapLayer:async()=>(await e(()=>import("./OpenStreetMapLayer-93a9289d.js"),["assets/OpenStreetMapLayer-93a9289d.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/WebTileLayer-a265543d.js","assets/imageBitmapUtils-28d567dd.js"])).default,OrientedImageryLayer:async()=>(await e(()=>import("./OrientedImageryLayer-f7bd7f22.js"),["assets/OrientedImageryLayer-f7bd7f22.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,PointCloudLayer:async()=>(await e(()=>import("./PointCloudLayer-1f0378e1.js"),["assets/PointCloudLayer-1f0378e1.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/SceneService-9cb6bde2.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceUtils-2545fe59.js","assets/PointCloudUniqueValueRenderer-b3ccc53d.js","assets/elevationInfoUtils-c2569e00.js"])).default,RouteLayer:async()=>(await e(()=>import("./RouteLayer-d8020d45.js"),["assets/RouteLayer-d8020d45.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/Stop-21afe920.js"])).default,SceneLayer:async()=>(await e(()=>import("./SceneLayer-20f7c44d.js"),["assets/SceneLayer-20f7c44d.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/SceneService-9cb6bde2.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceUtils-2545fe59.js","assets/I3SUtil-4e0eb5a0.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quat-a1c1817e.js","assets/quatf64-3363c48e.js","assets/spatialReferenceEllipsoidUtils-27912cea.js","assets/I3SBinaryReader-b6044d39.js","assets/VertexAttribute-be58f9a2.js","assets/orientedBoundingBox-c73f99d8.js","assets/plane-6c3da9bf.js","assets/sphere-cb6d12c4.js","assets/ByteSizeUnit-d4757d40.js","assets/I3SLayerDefinitions-e9e82b80.js","assets/persistable-5e59bf6a.js","assets/resourceExtension-b49d1bed.js","assets/elevationInfoUtils-c2569e00.js","assets/popupUtils-47831f6c.js"])).default,StreamLayer:async()=>(await e(()=>import("./StreamLayer-1bccc3bd.js"),["assets/StreamLayer-1bccc3bd.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,SubtypeGroupLayer:async()=>(await e(()=>import("./SubtypeGroupLayer-559253fb.js"),["assets/SubtypeGroupLayer-559253fb.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,TileLayer:async()=>(await e(()=>import("./TileLayer-c3af5ee2.js"),["assets/TileLayer-c3af5ee2.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/ArcGISCachedService-d6d43973.js","assets/TileInfoTilemapCache-4a62f9f0.js","assets/TilemapCache-563a0d34.js","assets/ByteSizeUnit-d4757d40.js","assets/SublayersOwner-af8c2aef.js","assets/QueryTask-5c9128f1.js","assets/executeForIds-64785e03.js","assets/query-ee1dd75d.js","assets/pbfQueryUtils-77b7e0c7.js","assets/pbf-43b1a242.js","assets/OptimizedGeometry-33b2eb0d.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/executeQueryJSON-ce8281b8.js","assets/executeQueryPBF-a840aa56.js","assets/featureConversionUtils-1947fb7d.js","assets/sublayerUtils-6e281769.js","assets/imageBitmapUtils-28d567dd.js"])).default,UnknownLayer:async()=>(await e(()=>import("./UnknownLayer-9fe8a70c.js"),["assets/UnknownLayer-9fe8a70c.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,UnsupportedLayer:async()=>(await e(()=>import("./UnsupportedLayer-0f863827.js"),["assets/UnsupportedLayer-0f863827.js","assets/index-10102046.js","assets/index-0e712e80.css"])).default,VectorTileLayer:async()=>(await e(()=>import("./VectorTileLayer-fa149435.js"),["assets/VectorTileLayer-fa149435.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/ArcGISCachedService-d6d43973.js","assets/TileInfoTilemapCache-4a62f9f0.js","assets/TilemapCache-563a0d34.js","assets/ByteSizeUnit-d4757d40.js","assets/jsonContext-b65b26ad.js","assets/StyleRepository-4fa33a21.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/enums-fb086c25.js","assets/enums-2fd71354.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-f8ed144f.js","assets/GeometryUtils-984e8446.js","assets/definitions-6059d557.js"])).default,VoxelLayer:async()=>(await e(()=>import("./VoxelLayer-e3156b7b.js"),["assets/VoxelLayer-e3156b7b.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/SceneService-9cb6bde2.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/resourceUtils-2545fe59.js","assets/persistable-5e59bf6a.js","assets/resourceExtension-b49d1bed.js","assets/quat-a1c1817e.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js"])).default,WFSLayer:async()=>(await e(()=>import("./WFSLayer-6333fcb9.js"),["assets/WFSLayer-6333fcb9.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/clientSideDefaults-54fd22ba.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/wfsUtils-6bd3424e.js","assets/geojson-640ee4a0.js","assets/OptimizedGeometry-33b2eb0d.js","assets/xmlUtils-444cb4c0.js"])).default,WMSLayer:async()=>(await e(()=>import("./WMSLayer-25eb89ee.js"),["assets/WMSLayer-25eb89ee.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/scaleUtils-5b540a2c.js","assets/crsUtils-3bab3d8c.js","assets/ExportWMSImageParameters-6f02b0ef.js","assets/imageBitmapUtils-28d567dd.js"])).default,WMTSLayer:async()=>(await e(()=>import("./WMTSLayer-1662d2da.js"),["assets/WMTSLayer-1662d2da.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/WebTileLayer-a265543d.js","assets/imageBitmapUtils-28d567dd.js","assets/TileInfoTilemapCache-4a62f9f0.js","assets/crsUtils-3bab3d8c.js","assets/xmlUtils-444cb4c0.js"])).default,WebTileLayer:async()=>(await e(()=>import("./WebTileLayer-a265543d.js").then(a=>a.W),["assets/WebTileLayer-a265543d.js","assets/index-10102046.js","assets/index-0e712e80.css","assets/imageBitmapUtils-28d567dd.js"])).default};async function S(a,n){const i=E(a);if(!i)throw new l("invalid-url","Invalid scene service url");const t={...n,sceneServerUrl:i.url.path,layerId:i.sublayer??void 0};if(t.sceneLayerItem??(t.sceneLayerItem=await O(t)),t.sceneLayerItem==null)return p(t.sceneServerUrl.replace("/SceneServer","/FeatureServer"),t);const r=await P(t);if(!(r!=null&&r.url))throw new l("related-service-not-found","Could not find feature service through portal item relationship");const u=await p(r.url,t);return u.portalItem=r,u}async function O(a){const n=(await v(a)).serviceItemId;if(!n)return null;const i=new m({id:n,apiKey:a.apiKey}),t=await A(a);t!=null&&(i.portal=new T({url:t}));try{return i.load({signal:a.signal})}catch(r){return y(r),null}}async function v(a){if(a.rootDocument)return a.rootDocument;const n={query:{f:"json",token:a.apiKey},responseType:"json",signal:a.signal};try{const i=await d(a.sceneServerUrl,n);a.rootDocument=i.data}catch{a.rootDocument={}}return a.rootDocument}async function A(a){var t;const n=(t=D)==null?void 0:t.findServerInfo(a.sceneServerUrl);if(n!=null&&n.owningSystemUrl)return n.owningSystemUrl;const i=a.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await d(i,{query:{f:"json"},responseType:"json",signal:a.signal})).data.owningSystemUrl;if(r)return r}catch(r){y(r)}return null}async function p(a,n){const i=E(a);if(!i)throw new l("invalid-feature-service-url","Invalid feature service url");const t=i.url.path,r=n.layerId;if(r==null)return{serverUrl:t};const u=v(n),c=_=>{const I={query:{f:"json"},responseType:"json",authMode:_,signal:n.signal};return d(t,I)},w=c("anonymous").catch(()=>c("no-prompt")),[L,f]=await Promise.all([w,u]),s=f&&f.layers,o=L.data&&L.data.layers;if(!Array.isArray(o))throw new Error("expected layers array");if(Array.isArray(s)){for(let _=0;_<Math.min(s.length,o.length);_++)if(s[_].id===r)return{serverUrl:t,layerId:o[_].id}}else if(r!=null&&r<o.length)return{serverUrl:t,layerId:o[r].id};throw new Error("could not find matching associated sublayer")}async function P({sceneLayerItem:a,signal:n}){if(!a)return null;try{const i=(await a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:n})).find(r=>r.type==="Feature Service")||null;if(!i)return null;const t=new m({portal:i.portal,id:i.id});return await t.load(),t}catch(i){return y(i),null}}export{V as a,S as l};
