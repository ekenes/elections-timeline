import{i as on,b as H,n as B,m as Mu}from"./TimeOnly-7709534d.js";import{hk as G,bE as Ru,L as Kt}from"./index-10102046.js";var d;(function(i){i.InvalidFunctionParameters="InvalidFunctionParameters",i.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",i.UnsupportedSqlFunction="UnsupportedSqlFunction",i.UnsupportedOperator="UnsupportedOperator",i.UnsupportedSyntax="UnsupportedSyntax",i.UnsupportedIsRhs="UnsupportedIsRhs",i.UnsupportedIsLhs="UnsupportedIsLhs",i.InvalidDataType="InvalidDataType",i.CannotCastValue="CannotCastValue",i.FunctionNotRecognized="FunctionNotRecognized",i.InvalidTime="InvalidTime",i.InvalidParameterCount="InvalidParameterCount",i.InvalidTimeStamp="InvalidTimeStamp",i.InvalidDate="InvalidDate",i.InvalidOperator="InvalidOperator",i.IllegalInterval="IllegalInterval",i.YearMonthIntervals="YearMonthIntervals",i.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",i.MissingStatisticParameters="MissingStatisticParameters"})(d||(d={}));const $u={[d.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[d.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[d.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.UnsupportedOperator]:"Unsupported operator - {operator}",[d.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.UnsupportedSqlFunction]:"Sql function not found = {function}",[d.InvalidDataType]:"Invalid sql data type",[d.InvalidDate]:"Invalid date encountered",[d.InvalidOperator]:"Invalid operator encountered",[d.InvalidTime]:"Invalid time encountered",[d.IllegalInterval]:"Illegal interval",[d.FunctionNotRecognized]:"Function not recognized",[d.InvalidTimeStamp]:"Invalid timestamp encountered",[d.InvalidParameterCount]:"Invalid parameter count for call to {name}",[d.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[d.YearMonthIntervals]:"Year-Month Intervals not supported",[d.CannotCastValue]:"Cannot cast value to the required data type"};let m=class sn extends Error{constructor(r,s){super(on($u[r],s)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,sn)}};var Q;(function(i){i.NeverReach="NeverReach",i.NotImplemented="NotImplemented",i.Cancelled="Cancelled",i.InvalidStatResponse="InvalidStatResponse",i.InvalidRequest="InvalidRequest",i.RequestFailed="RequestFailed",i.MissingFeatures="MissingFeatures",i.AggregationFieldNotFound="AggregationFieldNotFound",i.DataElementsNotFound="DataElementsNotFound"})(Q||(Q={}));const Pu={[Q.Cancelled]:"Cancelled",[Q.InvalidStatResponse]:"Invalid statistics response from service",[Q.InvalidRequest]:"Invalid request",[Q.RequestFailed]:"Request failed - {reason}",[Q.MissingFeatures]:"Missing features",[Q.AggregationFieldNotFound]:"Aggregation field not found",[Q.DataElementsNotFound]:"Data elements not found on service",[Q.NeverReach]:"Encountered unreachable logic",[Q.NotImplemented]:"Not implemented"};let oc=class un extends Error{constructor(r,s){super(on(Pu[r],s)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,un)}};function Xt(i){return Number.isNaN(i)||i===0?i:Math.trunc(i)}class z{constructor(r){this._timeStampOffset=r,this._date=null}toDateTime(){return this._date??(this._date=G.fromISO(this._timeStampOffset,{setZone:!0})),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return Xt(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return Xt(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return z.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(r){return new z(G.fromJSDate(r).toISO({includeOffset:!0}))}static fromDateTime(r){return new z(r.toISO({includeOffset:!0}))}static fromParts(r,s,c=0,l=0,h=0,I=0,t=0,T=!1,O=0,P=0){const L=`${r.toString().padStart(4,"0")}-${s.toString().padStart(2,"0")}-${c.toString().padStart(2,"0")}`;let V="";I<10&&(V="0");let C=`${l.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${V+I.toString()}`;t!==0&&(C+="."+t.toString().padStart(3,"0"));const b=`${T?"-":"+"}${O.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`;return new z(L+"T"+C+b)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let r=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return r&&(r=r.replace(".000","")),r}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(r){const s=this.toDateTime().plus(r);return z.fromDateTime(s)}}function _u(i,r){const s=ln[i.toLowerCase()];if(s==null)throw new m(d.FunctionNotRecognized);if(r.length<s.minParams||r.length>s.maxParams)throw new m(d.InvalidParameterCount,{name:i.toUpperCase()});return s.evaluate(r)}function en(i,r){const s=ln[i.toLowerCase()];return s!=null&&r>=s.minParams&&r<=s.maxParams}const ln={min:{minParams:1,maxParams:1,evaluate:i=>tn(i[0],"min")},max:{minParams:1,maxParams:1,evaluate:i=>tn(i[0],"max")},avg:{minParams:1,maxParams:1,evaluate:i=>cn(i[0])},sum:{minParams:1,maxParams:1,evaluate:i=>Lu(i[0])},stddev:{minParams:1,maxParams:1,evaluate:i=>Du(i[0])},count:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].length},var:{minParams:1,maxParams:1,evaluate:i=>fn(i[0])}};function cn(i){if(i===null)return null;let r=0,s=0;for(let c=0;c<i.length;c++){const l=i[c];if(l!==null){if(!Ke(l))throw new m(d.InvalidValueForAggregateFunction);s++,r+=l}}return s===0?null:r/i.length}function Ke(i){return typeof i=="number"}function tn(i,r){if(i===null)return null;let s=null,c=null;for(const l of i){let h=l;h=l instanceof H||l instanceof B?l.toNumber():l instanceof G?l.toMillis():l instanceof z?l.toMilliseconds():l,(s===null||r==="max"&&c!==null&&h!==null&&c<=h||r==="min"&&c!==null&&h!==null&&c>=h)&&(s=l,c=h)}return s}function Lu(i){if(i===null)return null;let r=0;for(let s=0;s<i.length;s++){const c=i[s];if(c!==null){if(!Ke(c))throw new m(d.InvalidValueForAggregateFunction);r+=c}}return r}function Du(i){if(i===null)return null;const r=fn(i);return r===null?null:Math.sqrt(r)}function fn(i){if(i===null||(i=i.filter(c=>c!==null)).length===0)return null;const r=cn(i);if(r===null)return null;let s=0;for(const c of i){if(!Ke(c))throw new m(d.InvalidValueForAggregateFunction);s+=(r-c)**2}return s/(i.length-1)}let J=class ee{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(r){if(r.precision!==null||r.secondary!==null)throw new m(d.PrimarySecondaryQualifiers)}static _parseSecondsComponent(r,s){if(s.includes(".")){const c=s.split(".");r.second=parseFloat(c[0]),r.millis=parseInt(c[1],10)}else r.second=parseFloat(s)}static createFromMilliseconds(r){const s=new ee;return s.second=r/1e3,s}static createFromValueAndQualifer(r,s,c){let l=null;const h=new ee;if(h.op=c==="-"?"-":"+",s.type==="interval-period"){ee._fixDefaults(s);const I=new RegExp("^[0-9]{1,}$");if(s.period==="year"||s.period==="month")throw new m(d.YearMonthIntervals);if(s.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))throw new m(d.IllegalInterval);ee._parseSecondsComponent(h,r)}else{if(!I.test(r))throw new m(d.IllegalInterval);h[s.period]=parseFloat(r)}}else{if(ee._fixDefaults(s.start),ee._fixDefaults(s.end),s.start.period==="year"||s.start.period==="month"||s.end.period==="year"||s.end.period==="month")throw new m(d.YearMonthIntervals);switch(s.start.period){case"day":switch(s.end.period){case"hour":if(l=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!l.test(r))throw new m(d.IllegalInterval);h[s.start.period]=parseFloat(r.split(" ")[0]),h[s.end.period]=parseFloat(r.split(" ")[1]);break;case"minute":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!l.test(r))throw new m(d.IllegalInterval);{h[s.start.period]=parseFloat(r.split(" ")[0]);const I=r.split(" ")[1].split(":");h.hour=parseFloat(I[0]),h.minute=parseFloat(I[1])}break;case"second":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new m(d.IllegalInterval);{h[s.start.period]=parseFloat(r.split(" ")[0]);const I=r.split(" ")[1].split(":");h.hour=parseFloat(I[0]),h.minute=parseFloat(I[1]),ee._parseSecondsComponent(h,I[2])}break;default:throw new m(d.IllegalInterval)}break;case"hour":switch(s.end.period){case"minute":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!l.test(r))throw new m(d.IllegalInterval);h.hour=parseFloat(r.split(":")[0]),h.minute=parseFloat(r.split(":")[1]);break;case"second":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new m(d.IllegalInterval);{const I=r.split(":");h.hour=parseFloat(I[0]),h.minute=parseFloat(I[1]),ee._parseSecondsComponent(h,I[2])}break;default:throw new m(d.IllegalInterval)}break;case"minute":if(s.end.period!=="second")throw new m(d.IllegalInterval);if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new m(d.IllegalInterval);{const I=r.split(":");h.minute=parseFloat(I[0]),ee._parseSecondsComponent(h,I[1])}break;default:throw new m(d.IllegalInterval)}}return h}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}};const Uu=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,Ju=/^(\d{1,2}):(\d{1,2})$/,Vu=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,dn=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Zu=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,ku=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,zu=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,Hu=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function be(i,r){switch(r){case"system":case"local":case null:return G.fromJSDate(i);default:return G.fromJSDate(i).setZone(r)}}function Z(i){return typeof i=="number"}function k(i){return typeof i=="string"||i instanceof String}function re(i){return i instanceof J}function Y(i){return i instanceof Date}function A(i){return i instanceof G}function E(i){return i instanceof H}function R(i){return i instanceof B}function F(i){return i instanceof z}function Xe(i){let r=Uu.exec(i);if(r!==null){const[,s,c,l]=r,h=B.fromParts(parseInt(s,10),parseInt(c,10),parseInt(l,10),0);if(h!==null)return h;throw new m(d.InvalidTime)}if(r=Ju.exec(i),r!==null){const[,s,c]=r,l=B.fromParts(parseInt(s,10),parseInt(c,10),0,0);if(l!==null)return l;throw new m(d.InvalidTime)}if(r=Vu.exec(i),r!==null){const[,s,c,l,h]=r,I=B.fromParts(parseInt(s,10),parseInt(c,10),parseInt(l,10),parseInt(h,10));if(I!==null)return I;throw new m(d.InvalidTime)}throw new m(d.InvalidTime)}function Ae(i,r,s=!1){let c=Zu.exec(i);if(c!==null){const[,l,h,I,t,T,O,P]=c,L=G.fromObject({year:parseInt(l,10),month:parseInt(h,10),day:parseInt(I,10),hour:parseInt(t,10),minute:parseInt(T,10),second:parseInt(O,10),millisecond:P?parseInt(P.replace(".",""),10):0},{zone:r});if(L.isValid===!1)throw new m(d.InvalidTimeStamp);return L}if(c=ku.exec(i),c!==null){const[,l,h,I,t,T,O,P,L,V,C]=c,b=z.fromParts(parseInt(l,10),parseInt(h,10),parseInt(I,10),parseInt(t,10),parseInt(T,10),parseInt(O,10),P?parseInt(P.replace(".",""),10):0,L==="-",parseInt(V,10),parseInt(C,10));if(b.isValid===!1)throw new m(d.InvalidTimeStamp);return b}if(c=zu.exec(i),c!==null){const[,l,h,I,t,T,O,P,L]=c,V=z.fromParts(parseInt(l,10),parseInt(h,10),parseInt(I,10),parseInt(t,10),parseInt(T,10),0,0,O==="-",parseInt(P,10),parseInt(L,10));if(V.isValid===!1)throw new m(d.InvalidTimeStamp);return V}if(c=Hu.exec(i),c!==null){const[,l,h,I,t,T]=c,O=G.fromObject({year:parseInt(l,10),month:parseInt(h,10),day:parseInt(I,10),hour:parseInt(t,10),minute:parseInt(T,10),second:0},{zone:r});if(O.isValid===!1)throw new m(d.InvalidTimeStamp);return O}if(c=dn.exec(i),c!==null){const[,l,h,I]=c,t=G.fromObject({year:parseInt(l,10),month:parseInt(h,10),day:parseInt(I,10),hour:0,minute:0,second:0},{zone:r});if(t.isValid===!1)throw new m(d.InvalidTimeStamp);return t}throw new m(d.InvalidTimeStamp)}function pn(i,r){const s=dn.exec(i);if(s===null)try{return Ae(i,r)}catch{throw new m(d.InvalidDate)}const[,c,l,h]=s,I=H.fromParts(parseInt(c,10),parseInt(l,10),parseInt(h,10));if(I===null)throw new m(d.InvalidDate);return I}function Ye(i){return!!A(i)||!!F(i)}function qu(i){return!!A(i)||!!E(i)||!!F(i)||!!R(i)}function xe(i){if(A(i))return i.toMillis();if(E(i))return i.toNumber();if(F(i))return i.toMilliseconds();throw new m(d.InvalidDataType)}function j(i,r,s,c){if(i==null||r==null)return null;if(Z(i)){if(Z(r))return W(i,r,s);if(k(r))return Yu(i,r,s);if(qu(r))throw new m(d.InvalidOperator);if(E(r))throw new m(d.InvalidOperator)}else if(k(i)){if(Z(r))return ju(i,r,s);if(k(r))return Bu(i,r,s);if(A(r))throw new m(d.InvalidOperator);if(E(r))throw new m(d.InvalidOperator);if(R(r))throw new m(d.InvalidOperator);if(F(r))throw new m(d.InvalidOperator)}else if(A(i)){if(Ye(r))return W(xe(i),xe(r),s);if(k(r))throw new m(d.InvalidOperator);if(E(r))return Qu(i,r,s);if(R(r))throw new m(d.InvalidOperator);if(Z(r))throw new m(d.InvalidOperator)}else if(E(i)){if(F(r))return Ku(i,r,s);if(A(r))return Gu(i,r,s);if(k(r))throw new m(d.InvalidOperator);if(E(r))return W(i.toNumber(),r.toNumber(),s);if(R(r))throw new m(d.InvalidOperator);if(Z(r))throw new m(d.InvalidOperator)}else if(R(i)){if(R(r))return W(i.toNumber(),r.toNumber(),s);if(k(r))throw new m(d.InvalidOperator);if(Z(r))throw new m(d.InvalidOperator);if(E(r))throw new m(d.InvalidOperator);if(Ye(r))throw new m(d.InvalidOperator)}else if(F(i)){if(Ye(r))return W(xe(i),xe(r),s);if(k(r))throw new m(d.InvalidOperator);if(E(r))return Wu(i,r,s);if(R(r))throw new m(d.InvalidOperator);if(Z(r))throw new m(d.InvalidOperator)}switch(s){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function W(i,r,s){switch(s){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function Yu(i,r,s){const c=parseFloat(r);if(!isNaN(c))return W(i,c,s);const l=i.toString();switch(s){case"<>":return l!==r;case"=":return l===r;case">":return l>r;case"<":return l<r;case">=":return l>=r;case"<=":return l<=r}}function ju(i,r,s){const c=parseFloat(i);if(!isNaN(c))return W(c,r,s);const l=r.toString();switch(s){case"<>":return i!==l;case"=":return i===l;case">":return i>l;case"<":return i<l;case">=":return i>=l;case"<=":return i<=l}}function Bu(i,r,s){switch(s){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function Qu(i,r,s){const c=r.toDateTimeLuxon(i.zone);return W((i=i.startOf("day")).toMillis(),c.toMillis(),s)}function Wu(i,r,s){const c=r.toDateTimeLuxon(i.toDateTime().zone);return W((i=i.startOfDay()).toMilliseconds(),c.toMillis(),s)}function Gu(i,r,s){const c=i.toDateTimeLuxon(r.zone);return r=r.startOf("day"),W(c.toMillis(),r.toMillis(),s)}function Ku(i,r,s){const c=i.toDateTimeLuxon(r.toDateTime().zone);return r=r.startOfDay(),W(c.toMillis(),r.toMilliseconds(),s)}function et(i,r,s){const c=vn[i.toLowerCase()];if(c==null)throw new m(d.FunctionNotRecognized);if(r.length<c.minParams||r.length>c.maxParams)throw new m(d.InvalidParameterCount,{name:i.toUpperCase()});return c.evaluate(r,s)}function Xu(i,r){const s=vn[i.toLowerCase()];return s!=null&&r>=s.minParams&&r<=s.maxParams}function Ee(i){return typeof i=="string"||i instanceof String}function je(i){return!Y(i)&&!E(i)&&!A(i)&&!R(i)&&!F(i)}function mn(i){return E(i)||R(i)?i.toString():F(i)?i.toSQLValue():A(i)?i.millisecond===0?i.toFormat("yyyy-LL-dd HH:mm:ss"):i.toSQL({includeOffset:!1}):Y(i)?mn(G.fromJSDate(i)):i.toString()}function el(i){if(Y(i))return H.fromDateJS(i);if(A(i))return H.fromParts(i.year,i.month,i.day);if(E(i))return i;if(R(i))throw new m(d.CannotCastValue);if(F(i)&&H.fromParts(i.year,i.month,i.day)===null)throw new m(d.CannotCastValue);if(Ee(i)){const r=H.fromReader(i);if(r!==null&&r.isValid)return r}throw new m(d.CannotCastValue)}function tl(i,r,s){if(Y(i))return be(i,r);if(A(i))return i.setZone(r);if(E(i))return i.toDateTimeLuxon(r);if(R(i))throw new m(d.CannotCastValue);if(F(i))return i;if(Ee(i))return Ae(i,r,s);throw new m(d.CannotCastValue)}function nl(i){if(Y(i))return B.fromDateJS(i);if(A(i))return B.fromDateTime(i);if(E(i))throw new m(d.CannotCastValue);if(R(i))return i;if(F(i))return B.fromSqlTimeStampOffset(i);if(Ee(i))return Xe(i);throw new m(d.CannotCastValue)}const vn={extract:{minParams:2,maxParams:2,evaluate:([i,r])=>{if(r==null)return null;if(Y(r))switch(i.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(A(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(E(r))switch(i.toUpperCase()){case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(R(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour}else if(F(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":return r.timezoneOffsetHour;case"TIMEZONE_MINUTE":return r.timezoneOffsetMinutes}throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:i=>{if(i.length===2){const[r,s]=i;return r==null||s==null?null:r.toString().substring(s-1)}if(i.length===3){const[r,s,c]=i;return r==null||s==null||c==null?null:c<=0?"":r.toString().substring(s-1,s+c-1)}}},position:{minParams:2,maxParams:2,evaluate:([i,r])=>i==null||r==null?null:r.indexOf(i)+1},trim:{minParams:2,maxParams:3,evaluate:i=>{const r=i.length===3,s=r?i[1]:" ",c=r?i[2]:i[1];if(s==null||c==null)return null;const l=`(${Ru(s)})`;switch(i[0]){case"BOTH":return c.replaceAll(new RegExp(`^${l}*|${l}*$`,"g"),"");case"LEADING":return c.replaceAll(new RegExp(`^${l}*`,"g"),"");case"TRAILING":return c.replaceAll(new RegExp(`${l}*$`,"g"),"")}throw new m(d.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.abs(i[0])},ceiling:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.ceil(i[0])},floor:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.floor(i[0])},log:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.log(i[0])},log10:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.log(i[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.sin(i[0])},cos:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.cos(i[0])},tan:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.tan(i[0])},asin:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.asin(i[0])},acos:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.acos(i[0])},atan:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.atan(i[0])},sign:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0]>0?1:i[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:i=>i[0]==null||i[1]==null?null:i[0]**i[1]},mod:{minParams:2,maxParams:2,evaluate:i=>i[0]==null||i[1]==null?null:i[0]%i[1]},round:{minParams:1,maxParams:2,evaluate:i=>{const r=i[0],s=i.length===2?10**i[1]:1;return r==null?null:Math.round(r*s)/s}},truncate:{minParams:1,maxParams:2,evaluate:i=>i[0]==null?null:i.length===1?parseInt(i[0].toFixed(0),10):parseFloat(i[0].toFixed(i[1]))},char_length:{minParams:1,maxParams:1,evaluate:i=>Ee(i[0])?i[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:i=>{let r="";for(let s=0;s<i.length;s++){if(i[s]==null)return null;r+=i[s].toString()}return r}},lower:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:i=>{for(const r of i)if(r!==null)return r;return null}},cosh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.cosh(i[0])},sinh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.sinh(i[0])},tanh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.tanh(i[0])},nullif:{minParams:2,maxParams:2,evaluate:(i,r)=>j(i[0],i[1],"=")?null:i[0]},cast:{minParams:2,maxParams:2,evaluate:(i,r)=>{const s=i[0],c=i[1];if(s===null)return null;switch(c.type){case"integer":{if(!je(s))throw new m(d.CannotCastValue);const l=parseInt(s,10);if(isNaN(l))throw new m(d.CannotCastValue);return l}case"smallint":{if(!je(s))throw new m(d.CannotCastValue);const l=parseInt(s,10);if(isNaN(l))throw new m(d.CannotCastValue);if(l>32767||l<-32767)throw new m(d.CannotCastValue);return l}case"float":case"real":{if(!je(s))throw new m(d.CannotCastValue);const l=parseFloat(s);if(isNaN(l))throw new m(d.CannotCastValue);return l}case"time":return nl(s);case"date":return el(s);case"timestamp":return tl(s,r,c.withtimezone===!0);case"varchar":{const l=mn(s);if(l.length>c.size)throw new m(d.CannotCastValue);return l}default:throw new m(d.InvalidDataType)}}}};function hn(i,r,s,c){if(i==="||")return et("concat",[r,s],c);if(r===null||s===null)return null;if(Z(r)){if(Z(s))return tt(r,s,i);if(re(s))return cl(r,s,i);if(R(s))return yl();if(E(s))return Tl();if(F(s))return gl();if(A(s))return wl();if(k(s))return Nl(r,s,i);throw new m(d.InvalidOperator)}if(E(r)){if(Z(s))return vl(r,s,i);if(re(s))return fl(r,s,i);if(R(s))return Fl();if(E(s))return El(r,s,i);if(F(s))return Al(r,s,i);if(A(s))return bl(r,s,i);if(k(s))return zl();throw new m(d.InvalidOperator)}if(R(r)){if(Z(s))return hl(r,s,i);if(re(s))return ol(r,s,i);if(R(s))return Ul();if(E(s))return Ll();if(F(s))return Dl();if(A(s))return _l();if(k(s))return Hl();throw new m(d.InvalidOperator)}if(re(r)){if(Z(s))return ll(r,s,i);if(re(s))return ul(r,s,i);if(R(s))return al(r,s,i);if(E(s))return il(r,s,i);if(F(s))return sl(r,s,i);if(A(s))return rl(r,s,i);if(k(s))return xl();throw new m(d.InvalidOperator)}if(A(r)){if(Z(s))return ml(r,s,i);if(re(s))return dl(r,s,i);if(R(s))return kl();if(E(s))return Vl(r,s,i);if(F(s))return Zl(r,s,i);if(A(s))return Jl(r,s,i);if(k(s))return ql();throw new m(d.InvalidOperator)}if(F(r)){if(Z(s))return Il(r,s,i);if(re(s))return pl(r,s,i);if(R(s))return Ml();if(E(s))return Rl(r,s,i);if(F(s))return Pl(r,s,i);if(A(s))return $l(r,s,i);if(k(s))return Yl();throw new m(d.InvalidOperator)}if(k(r)){if(Z(s))return Sl(r,s,i);if(re(s))return Cl();if(R(s))return jl();if(E(s))return Bl();if(F(s))return Wl();if(A(s))return Ql();if(k(s))return Ol(r,s,i);throw new m(d.InvalidOperator)}throw new m(d.InvalidOperator)}function tt(i,r,s){switch(s){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}throw new m(d.InvalidOperator)}function rl(i,r,s){switch(s){case"+":return r.plus({milliseconds:i.valueInMilliseconds()});case"-":return i.valueInMilliseconds()-r.toMillis()}throw new m(d.InvalidOperator)}function al(i,r,s){if(s==="+")return r.plus("milliseconds",i.valueInMilliseconds());throw new m(d.InvalidOperator)}function il(i,r,s){if(s==="+")return r.plus("milliseconds",i.valueInMilliseconds());throw new m(d.InvalidOperator)}function ol(i,r,s){switch(s){case"+":return i.plus("milliseconds",r.valueInMilliseconds());case"-":return i.plus("milliseconds",-1*r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function sl(i,r,s){if(s==="+")return r.addMilliseconds(i.valueInMilliseconds());throw new m(d.InvalidOperator)}function ul(i,r,s){switch(s){case"+":return J.createFromMilliseconds(i.valueInMilliseconds()+r.valueInMilliseconds());case"-":return J.createFromMilliseconds(i.valueInMilliseconds()-r.valueInMilliseconds());case"*":return J.createFromMilliseconds(i.valueInMilliseconds()*r.valueInMilliseconds());case"/":return J.createFromMilliseconds(i.valueInMilliseconds()/r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function ll(i,r,s){switch(s){case"+":return J.createFromMilliseconds(i.valueInMilliseconds()+r);case"-":return J.createFromMilliseconds(i.valueInMilliseconds()-r);case"*":return J.createFromMilliseconds(i.valueInMilliseconds()*r);case"/":return J.createFromMilliseconds(i.valueInMilliseconds()/r)}throw new m(d.InvalidOperator)}function cl(i,r,s){switch(s){case"+":return J.createFromMilliseconds(i+r.valueInMilliseconds());case"-":return J.createFromMilliseconds(i-r.valueInMilliseconds());case"*":return J.createFromMilliseconds(i*r.valueInMilliseconds());case"/":return J.createFromMilliseconds(i/r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function fl(i,r,s){switch(s){case"+":return i.plus("milliseconds",r.valueInMilliseconds());case"-":return i.plus("milliseconds",-1*r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function dl(i,r,s){switch(s){case"+":return i.plus({milliseconds:r.valueInMilliseconds()});case"-":return i.minus({milliseconds:r.valueInMilliseconds()})}throw new m(d.InvalidOperator)}function pl(i,r,s){switch(s){case"+":return i.addMilliseconds(r.valueInMilliseconds());case"-":return i.addMilliseconds(-1*r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function ml(i,r,s){const c=1e3*r*24*60*60;switch(s){case"+":return i.plus({milliseconds:c});case"-":return i.minus({milliseconds:c})}throw new m(d.InvalidOperator)}function vl(i,r,s){const c=1e3*r*24*60*60;switch(s){case"+":return i.plus("milliseconds",c);case"-":return i.plus("milliseconds",-1*c)}throw new m(d.InvalidOperator)}function hl(i,r,s){const c=1e3*r*24*60*60;switch(s){case"+":return i.plus("milliseconds",c);case"-":return i.plus("milliseconds",-1*c)}throw new m(d.InvalidOperator)}function wl(i,r,s){throw new m(d.InvalidOperator)}function Il(i,r,s){const c=1e3*r*24*60*60;switch(s){case"+":return i.addMilliseconds(c);case"-":return i.addMilliseconds(-1*c)}throw new m(d.InvalidOperator)}function gl(i,r,s){throw new m(d.InvalidOperator)}function yl(i,r,s){throw new m(d.InvalidOperator)}function Tl(i,r,s){throw new m(d.InvalidOperator)}function Nl(i,r,s){const c=parseFloat(r);if(isNaN(c))throw new m(d.InvalidOperator);return tt(i,c,s)}function Sl(i,r,s){const c=parseFloat(i);if(isNaN(c))throw new m(d.InvalidOperator);return tt(c,r,s)}function Ol(i,r,s){if(s==="+")return i+r;throw new m(d.InvalidOperator)}function xl(i,r,s){throw new m(d.InvalidOperator)}function Cl(i,r,s){throw new m(d.InvalidOperator)}function bl(i,r,s){if(s==="-")return i.toDateTimeLuxon(r.zone).diff(r).as("days");throw new m(d.InvalidOperator)}function Al(i,r,s){if(s==="-")return i.toDateTimeLuxon(r.toDateTime().zone).diff(r.toDateTime()).as("days");throw new m(d.InvalidOperator)}function El(i,r,s){if(s==="-")return i.toDateTimeLuxon("UTC").diff(r.toDateTimeLuxon("UTC")).as("days");throw new m(d.InvalidOperator)}function Fl(i,r,s){throw new m(d.InvalidOperator)}function Ml(i,r,s){throw new m(d.InvalidOperator)}function Rl(i,r,s){if(s==="-")return i.toDateTime().diff(r.toDateTimeLuxon(i.toDateTime().zone)).as("days");throw new m(d.InvalidOperator)}function $l(i,r,s){if(s==="-")return i.toDateTime().diff(r).as("days");throw new m(d.InvalidOperator)}function Pl(i,r,s){if(s==="-")return i.toDateTime().diff(r.toDateTime()).as("days");throw new m(d.InvalidOperator)}function _l(i,r,s){throw new m(d.InvalidOperator)}function Ll(i,r,s){throw new m(d.InvalidOperator)}function Dl(i,r,s){throw new m(d.InvalidOperator)}function Ul(i,r,s){throw new m(d.InvalidOperator)}function Jl(i,r,s){if(s==="-")return i.diff(r).as("days");throw new m(d.InvalidOperator)}function Vl(i,r,s){if(s==="-")return i.diff(r.toDateTimeLuxon(i.zone)).as("days");throw new m(d.InvalidOperator)}function Zl(i,r,s){if(s==="-")return i.diff(r.toDateTime()).as("days");throw new m(d.InvalidOperator)}function kl(i,r,s){throw new m(d.InvalidOperator)}function zl(i,r,s){throw new m(d.InvalidOperator)}function Hl(i,r,s){throw new m(d.InvalidOperator)}function ql(i,r,s){throw new m(d.InvalidOperator)}function Yl(i,r,s){throw new m(d.InvalidOperator)}function jl(i,r,s){throw new m(d.InvalidOperator)}function Bl(i,r,s){throw new m(d.InvalidOperator)}function Ql(i,r,s){throw new m(d.InvalidOperator)}function Wl(i,r,s){throw new m(d.InvalidOperator)}var nn,rn,Be={exports:{}};Be.exports,rn=function(){function i(l,h){function I(){this.constructor=l}I.prototype=h.prototype,l.prototype=new I}function r(l,h,I,t){var T=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(T,r.prototype),T.expected=h,T.found=I,T.location=t,T.name="SyntaxError",T}function s(l,h,I){return I=I||" ",l.length>h?l:(h-=l.length,l+(I+=I.repeat(h)).slice(0,h))}function c(l,h){var I,t={},T=(h=h!==void 0?h:{}).grammarSource,O={start:gt},P=gt,L="!",V="=",C=">=",b=">",q="<=",_="<>",Nn="<",nt="!=",Fe="+",Me="-",rt="||",Sn="*",On="/",xn="@",at="'",it="N'",de="''",Cn=".",bn="null",An="true",En="false",Fn="in",Mn="is",Rn="like",$n="escape",Pn="not",_n="and",Ln="or",Dn="between",Un="from",Jn="for",Vn="substring",Zn="extract",kn="trim",zn="position",Hn="timestamp",qn="date",Yn="time",jn="leading",Bn="trailing",Qn="both",Wn="cast",Gn="as",Kn="integer",Xn="smallint",er="float",tr="real",nr="varchar",rr="to",ar="interval",ir="year",or="timezone_hour",sr="timezone_minute",ur="month",lr="day",cr="hour",fr="minute",dr="second",pr="case",mr="end",vr="when",hr="then",wr="else",Ir=",",gr="(",yr=")",ot="`",Tr=/^[A-Za-z_\x80-\uFFFF]/,Nr=/^[A-Za-z0-9_]/,st=/^[A-Za-z0-9_.\x80-\uFFFF]/,Sr=/^["]/,ut=/^[^']/,Or=/^[0-9]/,xr=/^[eE]/,Cr=/^[+\-]/,br=/^[ \t\n\r]/,lt=/^[^`]/,Ar=y("!",!1),ct=y("=",!1),Er=y(">=",!1),Fr=y(">",!1),Mr=y("<=",!1),Rr=y("<>",!1),$r=y("<",!1),Pr=y("!=",!1),Re=y("+",!1),$e=y("-",!1),_r=y("||",!1),Lr=y("*",!1),Dr=y("/",!1),Ur=X([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),Jr=X([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),ft=X([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),Vr=X(['"'],!1,!1),Zr=y("@",!1),dt=y("'",!1),kr=y("N'",!1),pt=y("''",!1),mt=X(["'"],!0,!1),zr=y(".",!1),Hr=X([["0","9"]],!1,!1),qr=X(["e","E"],!1,!1),Yr=X(["+","-"],!1,!1),jr=y("NULL",!0),Br=y("TRUE",!0),Qr=y("FALSE",!0),Wr=y("IN",!0),Gr=y("IS",!0),Kr=y("LIKE",!0),Xr=y("ESCAPE",!0),ea=y("NOT",!0),ta=y("AND",!0),na=y("OR",!0),ra=y("BETWEEN",!0),aa=y("FROM",!0),ia=y("FOR",!0),oa=y("SUBSTRING",!0),sa=y("EXTRACT",!0),ua=y("TRIM",!0),la=y("POSITION",!0),ca=y("TIMESTAMP",!0),fa=y("DATE",!0),da=y("TIME",!0),pa=y("LEADING",!0),ma=y("TRAILING",!0),va=y("BOTH",!0),ha=y("CAST",!0),wa=y("AS",!0),Ia=y("INTEGER",!0),ga=y("SMALLINT",!0),ya=y("FLOAT",!0),Ta=y("REAL",!0),Na=y("VARCHAR",!0),Sa=y("TO",!0),Oa=y("INTERVAL",!0),xa=y("YEAR",!0),Ca=y("TIMEZONE_HOUR",!0),ba=y("TIMEZONE_MINUTE",!0),Aa=y("MONTH",!0),Ea=y("DAY",!0),Fa=y("HOUR",!0),Ma=y("MINUTE",!0),Ra=y("SECOND",!0),$a=y("CASE",!0),Pa=y("END",!0),_a=y("WHEN",!0),La=y("THEN",!0),Da=y("ELSE",!0),Ua=y(",",!1),Ja=y("(",!1),Va=y(")",!1),Za=X([" ","	",`
`,"\r"],!1,!1),vt=y("`",!1),ht=X(["`"],!0,!1),ka=function(e){return e},za=function(e,a){var o={type:"expression-list"},u=bu(e,a);return o.value=u,o},Ha=function(e,a){return fe(e,a)},qa=function(e,a){return fe(e,a)},Ya=function(e){return xu("NOT",e)},ja=function(e,a){return a==""||a==null||a==null?e:a.type=="arithmetic"?fe(e,a.tail):Gt(a.op,e,a.right,a.escape)},Ba=function(e){return{type:"arithmetic",tail:e}},Qa=function(e,a){return{op:e+"NOT",right:a}},Wa=function(e,a){return{op:e,right:a}},Ga=function(e,a,o){return{op:"NOT"+e,right:{type:"expression-list",value:[a,o]}}},Ka=function(e,a,o){return{op:e,right:{type:"expression-list",value:[a,o]}}},Xa=function(e){return e[0]+" "+e[2]},ei=function(e){return e[0]+" "+e[2]},ti=function(e,a,o){return{op:e,right:a,escape:o.value}},ni=function(e,a){return{op:e,right:a,escape:""}},ri=function(e,a){return{op:e,right:a}},ai=function(e){return{op:e,right:{type:"expression-list",value:[]}}},ii=function(e,a){return{op:e,right:a}},oi=function(e,a){return fe(e,a)},si=function(e,a){return fe(e,a)},ui=function(e){return e.paren=!0,e},li=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},ci=function(e){return{type:"column-reference",table:"",column:e,delimited:!0}},fi=function(e){return e},di=function(e,a){return e+a.join("")},pi=function(e,a){return e+a.join("")},mi=function(e){return e},vi=function(e){return e.join("")},hi=function(){return'"'},wi=function(e){return{type:"parameter",value:e[1]}},Ii=function(e,a){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},a]}}},gi=function(e,a,o){return{type:"function",name:"substring",args:{type:"expression-list",value:o?[e,a,o[2]]:[e,a]}}},yi=function(e,a){return{type:"function",name:"cast",args:{type:"expression-list",value:[e,a]}}},Ti=function(){return{type:"data-type",value:{type:"integer"}}},Ni=function(){return{type:"data-type",value:{type:"smallint"}}},Si=function(){return{type:"data-type",value:{type:"float"}}},Oi=function(){return{type:"data-type",value:{type:"real"}}},xi=function(){return{type:"data-type",value:{type:"date"}}},Ci=function(){return{type:"data-type",value:{type:"timestamp"}}},bi=function(){return{type:"data-type",value:{type:"time"}}},Ai=function(e){return{type:"data-type",value:{type:"varchar",size:parseInt(e)}}},Ei=function(e,a,o){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},a,o]}}},Fi=function(e,a){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},a]}}},Mi=function(e,a){return{type:"function",name:"position",args:{type:"expression-list",value:[e,a]}}},Ri=function(e,a){return{type:"function",name:e,args:a||{type:"expression-list",value:[]}}},$i=function(e){return e.type==="string"&&Au(e.value),{type:"timestamp",value:e.value}},Pi=function(e){return e.type==="string"&&Eu(e.value),{type:"time",value:e.value}},_i=function(e,a,o){return{type:"interval",value:a,qualifier:o,op:e}},Li=function(e,a){return{type:"interval",value:e,qualifier:a,op:""}},Di=function(e,a){return{type:"interval-qualifier",start:e,end:a}},Ui=function(e,a){return{type:"interval-period",period:e.value,precision:a,secondary:null}},Ji=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Vi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Zi=function(e,a){return{type:"interval-period",period:"second",precision:e,secondary:a}},ki=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},zi=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Hi=function(e,a){return{type:"interval-period",period:e.value,precision:a,secondary:null}},qi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Yi=function(e,a){return{type:"interval-period",period:"second",precision:e,secondary:a}},ji=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Bi=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Qi=function(){return{type:"string",value:"day"}},Wi=function(){return{type:"string",value:"hour"}},Gi=function(){return{type:"string",value:"minute"}},Ki=function(){return{type:"string",value:"month"}},Xi=function(){return{type:"string",value:"year"}},eo=function(e){return parseFloat(e)},to=function(e){return parseFloat(e)},no=function(e){return e.type==="string"&&Fu(e.value),{type:"date",value:e.value}},ro=function(){return{type:"null",value:null}},ao=function(){return{type:"boolean",value:!0}},io=function(){return{type:"boolean",value:!1}},wt=function(){return"'"},oo=function(e){return{type:"string",value:e.join("")}},so=function(e,a){return{type:"case-expression",format:"simple",operand:e,clauses:a,else:null}},uo=function(e,a,o){return{type:"case-expression",format:"simple",operand:e,clauses:a,else:o.value}},lo=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},co=function(e,a){return{type:"case-expression",format:"searched",clauses:e,else:a.value}},fo=function(e,a){return{type:"when-clause",operand:e,value:a}},po=function(e,a){return{type:"when-clause",operand:e,value:a}},mo=function(e){return{type:"else-clause",value:e}},vo=function(e){return{type:"number",value:e}},ho=function(e,a,o){return parseFloat(e+a+o)},wo=function(e,a){return parseFloat(e+a)},Io=function(e,a){return parseFloat(e+a)},go=function(e){return parseFloat(e)},yo=function(e,a){return e[0]+a},To=function(e){return"."+(e??"")},No=function(e,a){return e+a},So=function(e){return e.join("")},Oo=function(e,a){return"e"+(a===null?"":a)},xo=function(){return"IN"},Co=function(){return"IS"},bo=function(){return"LIKE"},Ao=function(){return"ESCAPE"},Eo=function(){return"NOT"},Fo=function(){return"AND"},Mo=function(){return"OR"},Ro=function(){return"BETWEEN"},$o=function(){return"FROM"},Po=function(){return"FOR"},_o=function(){return"SUBSTRING"},Lo=function(){return"EXTRACT"},Do=function(){return"TRIM"},Uo=function(){return"POSITION"},Jo=function(){return"TIMESTAMP"},Vo=function(){return"DATE"},Zo=function(){return"TIME"},ko=function(){return"LEADING"},zo=function(){return"TRAILING"},Ho=function(){return"BOTH"},qo=function(){return"CAST"},Yo=function(){return"AS"},jo=function(){return"INTEGER"},Bo=function(){return"SMALLINT"},Qo=function(){return"FLOAT"},Wo=function(){return"REAL"},Go=function(){return"VARCHAR"},Ko=function(){return"TO"},Xo=function(){return"INTERVAL"},es=function(){return"YEAR"},ts=function(){return"TIMEZONE_HOUR"},ns=function(){return"TIMEZONE_MINUTE"},rs=function(){return"MONTH"},as=function(){return"DAY"},is=function(){return"HOUR"},os=function(){return"MINUTE"},ss=function(){return"SECOND"},us=function(){return"CASE"},ls=function(){return"END"},cs=function(){return"WHEN"},fs=function(){return"THEN"},ds=function(){return"ELSE"},ps=function(e){return e},ms=function(e){return e.join("")},n=0,v=0,pe=[{line:1,column:1}],K=0,Pe=[],f=0;if("startRule"in h){if(!(h.startRule in O))throw new Error(`Can't start parsing from rule "`+h.startRule+'".');P=O[h.startRule]}function _e(e,a){throw hs(e,a=a!==void 0?a:Le(v,n))}function y(e,a){return{type:"literal",text:e,ignoreCase:a}}function X(e,a,o){return{type:"class",parts:e,inverted:a,ignoreCase:o}}function vs(){return{type:"end"}}function It(e){var a,o=pe[e];if(o)return o;for(a=e-1;!pe[a];)a--;for(o={line:(o=pe[a]).line,column:o.column};a<e;)l.charCodeAt(a)===10?(o.line++,o.column=1):o.column++,a++;return pe[e]=o,o}function Le(e,a,o){var u=It(e),g=It(a),S={source:T,start:{offset:e,line:u.line,column:u.column},end:{offset:a,line:g.line,column:g.column}};return o&&T&&typeof T.offset=="function"&&(S.start=T.offset(S.start),S.end=T.offset(S.end)),S}function w(e){n<K||(n>K&&(K=n,Pe=[]),Pe.push(e))}function hs(e,a){return new r(e,null,null,a)}function ws(e,a,o){return new r(r.buildMessage(e,a),e,a,o)}function gt(){var e,a;return e=n,p(),(a=$())!==t?(p(),v=e,e=ka(a)):(n=e,e=t),e}function yt(){var e,a,o,u,g,S,x,M;if(e=n,(a=$())!==t){for(o=[],u=n,g=p(),(S=Oe())!==t?(x=p(),(M=$())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(S=Oe())!==t?(x=p(),(M=$())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);v=e,e=za(a,o)}else n=e,e=t;return e}function $(){var e,a,o,u,g,S,x,M;if(e=n,(a=De())!==t){for(o=[],u=n,g=p(),(S=Lt())!==t?(x=p(),(M=De())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(S=Lt())!==t?(x=p(),(M=De())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);v=e,e=Ha(a,o)}else n=e,e=t;return e}function De(){var e,a,o,u,g,S,x,M;if(e=n,(a=me())!==t){for(o=[],u=n,g=p(),(S=Te())!==t?(x=p(),(M=me())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(S=Te())!==t?(x=p(),(M=me())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);v=e,e=qa(a,o)}else n=e,e=t;return e}function me(){var e,a,o,u,g;return e=n,(a=ce())===t&&(a=n,l.charCodeAt(n)===33?(o=L,n++):(o=t,f===0&&w(Ar)),o!==t?(u=n,f++,l.charCodeAt(n)===61?(g=V,n++):(g=t,f===0&&w(ct)),f--,g===t?u=void 0:(n=u,u=t),u!==t?a=o=[o,u]:(n=a,a=t)):(n=a,a=t)),a!==t?(o=p(),(u=me())!==t?(v=e,e=Ya(u)):(n=e,e=t)):(n=e,e=t),e===t&&(e=Is()),e}function Is(){var e,a,o;return e=n,(a=ne())!==t?(p(),(o=gs())===t&&(o=null),v=e,e=ja(a,o)):(n=e,e=t),e}function gs(){var e;return(e=ys())===t&&(e=Os())===t&&(e=Ns())===t&&(e=Ts())===t&&(e=Ss()),e}function ys(){var e,a,o,u,g,S,x;if(e=n,a=[],o=n,u=p(),(g=Tt())!==t?(S=p(),(x=ne())!==t?o=u=[u,g,S,x]:(n=o,o=t)):(n=o,o=t),o!==t)for(;o!==t;)a.push(o),o=n,u=p(),(g=Tt())!==t?(S=p(),(x=ne())!==t?o=u=[u,g,S,x]:(n=o,o=t)):(n=o,o=t);else a=t;return a!==t&&(v=e,a=Ba(a)),e=a}function Tt(){var e;return l.substr(n,2)===C?(e=C,n+=2):(e=t,f===0&&w(Er)),e===t&&(l.charCodeAt(n)===62?(e=b,n++):(e=t,f===0&&w(Fr)),e===t&&(l.substr(n,2)===q?(e=q,n+=2):(e=t,f===0&&w(Mr)),e===t&&(l.substr(n,2)===_?(e=_,n+=2):(e=t,f===0&&w(Rr)),e===t&&(l.charCodeAt(n)===60?(e=Nn,n++):(e=t,f===0&&w($r)),e===t&&(l.charCodeAt(n)===61?(e=V,n++):(e=t,f===0&&w(ct)),e===t&&(l.substr(n,2)===nt?(e=nt,n+=2):(e=t,f===0&&w(Pr)))))))),e}function Ts(){var e,a,o,u;return e=n,(a=Pt())!==t?(p(),(o=ce())!==t?(p(),(u=ne())!==t?(v=e,e=Qa(a,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Pt())!==t?(p(),(o=ne())!==t?(v=e,e=Wa(a,o)):(n=e,e=t)):(n=e,e=t)),e}function Ns(){var e,a,o,u,g,S;return e=n,(a=ce())!==t?(p(),(o=Dt())!==t?(p(),(u=ne())!==t?(p(),(g=Te())!==t?(p(),(S=ne())!==t?(v=e,e=Ga(o,u,S)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Dt())!==t?(p(),(o=ne())!==t?(p(),(u=Te())!==t?(p(),(g=ne())!==t?(v=e,e=Ka(a,o,g)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Nt(){var e,a,o,u,g;return e=n,a=n,(o=ce())!==t?(u=p(),(g=_t())!==t?a=o=[o,u,g]:(n=a,a=t)):(n=a,a=t),a!==t&&(v=e,a=Xa(a)),(e=a)===t&&(e=_t()),e}function Ue(){var e,a,o,u,g;return e=n,a=n,(o=ce())!==t?(u=p(),(g=He())!==t?a=o=[o,u,g]:(n=a,a=t)):(n=a,a=t),a!==t&&(v=e,a=ei(a)),(e=a)===t&&(e=He()),e}function Ss(){var e,a,o,u;return e=n,(a=Nt())!==t?(p(),(o=ae())!==t?(p(),iu()!==t?(p(),(u=ze())!==t?(v=e,e=ti(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Nt())!==t?(p(),(o=ae())!==t?(v=e,e=ni(a,o)):(n=e,e=t)):(n=e,e=t)),e}function Os(){var e,a,o,u;return e=n,(a=Ue())!==t?(p(),(o=D())!==t?(p(),(u=yt())!==t?(p(),U()!==t?(v=e,e=ri(a,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Ue())!==t?(p(),(o=D())!==t?(p(),(u=U())!==t?(v=e,e=ai(a)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Ue())!==t?(p(),(o=ke())!==t?(v=e,e=ii(a,o)):(n=e,e=t)):(n=e,e=t))),e}function ne(){var e,a,o,u,g,S,x,M;if(e=n,(a=Je())!==t){for(o=[],u=n,g=p(),(S=St())!==t?(x=p(),(M=Je())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(S=St())!==t?(x=p(),(M=Je())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);v=e,e=oi(a,o)}else n=e,e=t;return e}function St(){var e;return l.charCodeAt(n)===43?(e=Fe,n++):(e=t,f===0&&w(Re)),e===t&&(l.charCodeAt(n)===45?(e=Me,n++):(e=t,f===0&&w($e)),e===t&&(l.substr(n,2)===rt?(e=rt,n+=2):(e=t,f===0&&w(_r)))),e}function Je(){var e,a,o,u,g,S,x,M;if(e=n,(a=Ve())!==t){for(o=[],u=n,g=p(),(S=Ot())!==t?(x=p(),(M=Ve())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(S=Ot())!==t?(x=p(),(M=Ve())!==t?u=g=[g,S,x,M]:(n=u,u=t)):(n=u,u=t);v=e,e=si(a,o)}else n=e,e=t;return e}function Ot(){var e;return l.charCodeAt(n)===42?(e=Sn,n++):(e=t,f===0&&w(Lr)),e===t&&(l.charCodeAt(n)===47?(e=On,n++):(e=t,f===0&&w(Dr))),e}function Ve(){var e,a;return(e=Vs())===t&&(e=Rs())===t&&(e=$s())===t&&(e=Ls())===t&&(e=Ds())===t&&(e=Ps())===t&&(e=Us())===t&&(e=Ws())===t&&(e=xs())===t&&(e=ke())===t&&(e=n,D()!==t?(p(),(a=$())!==t?(p(),U()!==t?(v=e,e=ui(a)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function xs(){var e,a;return e=n,(a=Cs())!==t&&(v=e,a=li(a)),(e=a)===t&&(e=n,(a=As())!==t&&(v=e,a=ci(a)),e=a),e}function Cs(){var e,a;return e=n,(a=bs())!==t&&(v=e,a=fi(a)),e=a}function bs(){var e,a,o,u;if(e=n,(a=Ze())!==t){for(o=[],u=Ct();u!==t;)o.push(u),u=Ct();v=e,e=di(a,o)}else n=e,e=t;return e}function xt(){var e,a,o,u;if(e=n,(a=Ze())!==t){for(o=[],u=N();u!==t;)o.push(u),u=N();v=e,e=pi(a,o)}else n=e,e=t;return e}function Ze(){var e;return Tr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Ur)),e}function N(){var e;return Nr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Jr)),e}function Ct(){var e;return st.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(ft)),e}function As(){var e,a;return e=n,ve()!==t?(a=Es(),ve()!==t?(v=e,e=mi(a)):(n=e,e=t)):(n=e,e=t),e}function Es(){var e,a,o;for(e=n,a=[],o=bt();o!==t;)a.push(o),o=bt();return v=e,e=a=vi(a)}function bt(){var e;return(e=Ms())===t&&(e=Fs()),e}function Fs(){var e;return e=n,ve()!==t&&ve()!==t?(v=e,e=hi()):(n=e,e=t),e}function Ms(){var e;return st.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(ft)),e}function ve(){var e;return Sr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Vr)),e}function ke(){var e,a,o,u;return e=n,a=n,l.charCodeAt(n)===64?(o=xn,n++):(o=t,f===0&&w(Zr)),o!==t&&(u=xt())!==t?a=o=[o,u]:(n=a,a=t),a!==t&&(v=e,a=wi(a)),e=a}function Rs(){var e,a,o;return e=n,uu()!==t?(p(),D()!==t?(p(),(a=Js())!==t?(p(),qe()!==t?(p(),(o=$())!==t?(p(),U()!==t?(v=e,e=Ii(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function $s(){var e,a,o,u,g,S,x;return e=n,su()!==t?(p(),D()!==t?(p(),(a=$())!==t?(p(),qe()!==t?(p(),(o=$())!==t?(p(),u=n,(g=ou())!==t?(S=p(),(x=$())!==t?u=g=[g,S,x,p()]:(n=u,u=t)):(n=u,u=t),u===t&&(u=null),(g=U())!==t?(v=e,e=gi(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Ps(){var e,a,o;return e=n,pu()!==t?(p(),D()!==t?(p(),(a=$())!==t?(p(),mu()!==t?(p(),(o=_s())!==t?(p(),U()!==t?(v=e,e=yi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function _s(){var e,a,o;return e=n,(a=vu())!==t&&(v=e,a=Ti()),(e=a)===t&&(e=n,(a=hu())!==t&&(v=e,a=Ni()),(e=a)===t&&(e=n,(a=wu())!==t&&(v=e,a=Si()),(e=a)===t&&(e=n,(a=Iu())!==t&&(v=e,a=Oi()),(e=a)===t&&(e=n,(a=Vt())!==t&&(v=e,a=xi()),(e=a)===t&&(e=n,(a=Jt())!==t&&(v=e,a=Ci()),(e=a)===t&&(e=n,(a=Zt())!==t&&(v=e,a=bi()),(e=a)===t&&(e=n,(a=gu())!==t?(p(),D()!==t?(p(),(o=ie())!==t?(p(),U()!==t?(v=e,e=Ai(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)))))))),e}function Ls(){var e,a,o,u;return e=n,Ut()!==t?(p(),D()!==t?(p(),(a=At())===t&&(a=null),p(),(o=$())!==t?(p(),qe()!==t?(p(),(u=$())!==t?(p(),U()!==t?(v=e,e=Ei(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,Ut()!==t?(p(),D()!==t?(p(),(a=At())===t&&(a=null),p(),(o=$())!==t?(p(),U()!==t?(v=e,e=Fi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function At(){var e;return(e=cu())===t&&(e=fu())===t&&(e=du()),e}function Ds(){var e,a,o;return e=n,lu()!==t?(p(),D()!==t?(p(),(a=$())!==t?(p(),He()!==t?(p(),(o=$())!==t?(p(),U()!==t?(v=e,e=Mi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Us(){var e,a,o;return e=n,(a=Ou())!==t?(p(),D()!==t?(p(),(o=yt())===t&&(o=null),p(),U()!==t?(v=e,e=Ri(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Js(){var e;return(e=zt())===t&&(e=Ht())===t&&(e=qt())===t&&(e=Yt())===t&&(e=jt())===t&&(e=oe())===t&&(e=Tu())===t&&(e=Nu()),e}function Vs(){var e;return(e=ze())===t&&(e=Xs())===t&&(e=Qs())===t&&(e=Bs())===t&&(e=js())===t&&(e=Zs())===t&&(e=zs())===t&&(e=ks()),e}function Zs(){var e,a;return e=n,Jt()!==t?(p(),(a=ae())!==t?(v=e,e=$i(a)):(n=e,e=t)):(n=e,e=t),e}function ks(){var e,a;return e=n,Zt()!==t?(p(),(a=ae())!==t?(v=e,e=Pi(a)):(n=e,e=t)):(n=e,e=t),e}function zs(){var e,a,o,u;return e=n,kt()!==t?(p(),l.charCodeAt(n)===45?(a=Me,n++):(a=t,f===0&&w($e)),a===t&&(l.charCodeAt(n)===43?(a=Fe,n++):(a=t,f===0&&w(Re))),a!==t?(p(),(o=ae())!==t?(p(),(u=Et())!==t?(v=e,e=_i(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,kt()!==t?(p(),(a=ae())!==t?(p(),(o=Et())!==t?(v=e,e=Li(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Et(){var e,a,o;return e=n,(a=Hs())!==t?(p(),yu()!==t?(p(),(o=qs())!==t?(v=e,e=Di(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=Ys()),e}function Hs(){var e,a,o;return e=n,(a=le())!==t?(p(),D()!==t?(p(),(o=we())!==t?(p(),U()!==t?(v=e,e=Ui(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=le())!==t&&(v=e,a=Ji(a)),e=a),e}function qs(){var e,a,o,u;return e=n,(a=le())!==t&&(v=e,a=Vi(a)),(e=a)===t&&(e=n,(a=oe())!==t?(p(),D()!==t?(p(),(o=we())!==t?(p(),Oe()!==t?(p(),(u=he())!==t?(p(),U()!==t?(v=e,e=Zi(o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=oe())!==t?(p(),D()!==t?(p(),(o=we())!==t?(p(),U()!==t?(v=e,e=ki(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=oe())!==t&&(v=e,a=zi()),e=a))),e}function Ys(){var e,a,o,u;return e=n,(a=le())!==t?(p(),D()!==t?(p(),(o=he())!==t?(p(),U()!==t?(v=e,e=Hi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=le())!==t&&(v=e,a=qi(a)),(e=a)===t&&(e=n,(a=oe())!==t?(p(),D()!==t?(p(),(o=we())!==t?(p(),Oe()!==t?(p(),(u=he())!==t?(p(),U()!==t?(v=e,e=Yi(o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=oe())!==t?(p(),D()!==t?(p(),(o=he())!==t?(p(),U()!==t?(v=e,e=ji(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=oe())!==t&&(v=e,a=Bi()),e=a)))),e}function le(){var e,a;return e=n,(a=qt())!==t&&(v=e,a=Qi()),(e=a)===t&&(e=n,(a=Yt())!==t&&(v=e,a=Wi()),(e=a)===t&&(e=n,(a=jt())!==t&&(v=e,a=Gi()),(e=a)===t&&(e=n,(a=Ht())!==t&&(v=e,a=Ki()),(e=a)===t&&(e=n,(a=zt())!==t&&(v=e,a=Xi()),e=a)))),e}function he(){var e,a;return e=n,(a=ie())!==t&&(v=e,a=eo(a)),e=a}function we(){var e,a;return e=n,(a=ie())!==t&&(v=e,a=to(a)),e=a}function js(){var e,a;return e=n,Vt()!==t?(p(),(a=ae())!==t?(v=e,e=no(a)):(n=e,e=t)):(n=e,e=t),e}function Bs(){var e,a;return e=n,(a=nu())!==t&&(v=e,a=ro()),e=a}function Qs(){var e,a;return e=n,(a=ru())!==t&&(v=e,a=ao()),(e=a)===t&&(e=n,(a=au())!==t&&(v=e,a=io()),e=a),e}function ae(){var e;return(e=ze())===t&&(e=ke()),e}function ze(){var e,a,o,u,g;if(e=n,l.charCodeAt(n)===39?(a=at,n++):(a=t,f===0&&w(dt)),a===t&&(l.substr(n,2)===it?(a=it,n+=2):(a=t,f===0&&w(kr))),a!==t){for(o=[],u=n,l.substr(n,2)===de?(g=de,n+=2):(g=t,f===0&&w(pt)),g!==t&&(v=u,g=wt()),(u=g)===t&&(ut.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(mt)));u!==t;)o.push(u),u=n,l.substr(n,2)===de?(g=de,n+=2):(g=t,f===0&&w(pt)),g!==t&&(v=u,g=wt()),(u=g)===t&&(ut.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(mt)));l.charCodeAt(n)===39?(u=at,n++):(u=t,f===0&&w(dt)),u!==t?(v=e,e=oo(o)):(n=e,e=t)}else n=e,e=t;return e}function Ws(){var e;return(e=Gs())===t&&(e=Ks()),e}function Gs(){var e,a,o,u,g;if(e=n,Ne()!==t)if(p(),(a=$())!==t){for(p(),o=[],u=ge();u!==t;)o.push(u),u=ge();u=p(),(g=Se())!==t?(v=e,e=so(a,o)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;if(e===t)if(e=n,Ne()!==t)if(p(),(a=$())!==t){for(p(),o=[],u=ge();u!==t;)o.push(u),u=ge();u=p(),(g=Ft())!==t?(p(),Se()!==t?(v=e,e=uo(a,o,g)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;return e}function Ks(){var e,a,o,u;if(e=n,Ne()!==t){for(p(),a=[],o=Ie();o!==t;)a.push(o),o=Ie();o=p(),(u=Se())!==t?(v=e,e=lo(a)):(n=e,e=t)}else n=e,e=t;if(e===t)if(e=n,Ne()!==t){for(p(),a=[],o=Ie();o!==t;)a.push(o),o=Ie();o=p(),(u=Ft())!==t?(p(),Se()!==t?(v=e,e=co(a,u)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Ie(){var e,a,o;return e=n,Bt()!==t?(p(),(a=$())!==t?(p(),Qt()!==t?(p(),(o=$())!==t?(v=e,e=fo(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function ge(){var e,a,o;return e=n,Bt()!==t?(p(),(a=$())!==t?(p(),Qt()!==t?(p(),(o=$())!==t?(v=e,e=po(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Ft(){var e,a;return e=n,Su()!==t?(p(),(a=$())!==t?(v=e,e=mo(a)):(n=e,e=t)):(n=e,e=t),e}function Xs(){var e,a,o,u;return e=n,(a=eu())!==t?(o=n,f++,u=Ze(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=vo(a)):(n=e,e=t)):(n=e,e=t),e}function eu(){var e,a,o,u;return e=n,(a=ye())!==t&&(o=Mt())!==t&&(u=Rt())!==t?(v=e,e=ho(a,o,u)):(n=e,e=t),e===t&&(e=n,(a=ye())!==t&&(o=Mt())!==t?(v=e,e=wo(a,o)):(n=e,e=t),e===t&&(e=n,(a=ye())!==t&&(o=Rt())!==t?(v=e,e=Io(a,o)):(n=e,e=t),e===t&&(e=n,(a=ye())!==t&&(v=e,a=go(a)),e=a))),e}function ye(){var e,a,o;return(e=ie())===t&&(e=n,l.charCodeAt(n)===45?(a=Me,n++):(a=t,f===0&&w($e)),a===t&&(l.charCodeAt(n)===43?(a=Fe,n++):(a=t,f===0&&w(Re))),a!==t&&(o=ie())!==t?(v=e,e=yo(a,o)):(n=e,e=t)),e}function Mt(){var e,a,o;return e=n,l.charCodeAt(n)===46?(a=Cn,n++):(a=t,f===0&&w(zr)),a!==t?((o=ie())===t&&(o=null),v=e,e=To(o)):(n=e,e=t),e}function Rt(){var e,a,o;return e=n,(a=tu())!==t&&(o=ie())!==t?(v=e,e=No(a,o)):(n=e,e=t),e}function ie(){var e,a,o;if(e=n,a=[],(o=$t())!==t)for(;o!==t;)a.push(o),o=$t();else a=t;return a!==t&&(v=e,a=So(a)),e=a}function $t(){var e;return Or.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Hr)),e}function tu(){var e,a,o;return e=n,xr.test(l.charAt(n))?(a=l.charAt(n),n++):(a=t,f===0&&w(qr)),a!==t?(Cr.test(l.charAt(n))?(o=l.charAt(n),n++):(o=t,f===0&&w(Yr)),o===t&&(o=null),v=e,e=Oo(a,o)):(n=e,e=t),e}function nu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===bn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(jr)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function ru(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===An?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Br)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function au(){var e,a,o,u;return e=n,l.substr(n,5).toLowerCase()===En?(a=l.substr(n,5),n+=5):(a=t,f===0&&w(Qr)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function He(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===Fn?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(Wr)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=xo()):(n=e,e=t)):(n=e,e=t),e}function Pt(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===Mn?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(Gr)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Co()):(n=e,e=t)):(n=e,e=t),e}function _t(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Rn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Kr)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=bo()):(n=e,e=t)):(n=e,e=t),e}function iu(){var e,a,o,u;return e=n,l.substr(n,6).toLowerCase()===$n?(a=l.substr(n,6),n+=6):(a=t,f===0&&w(Xr)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ao()):(n=e,e=t)):(n=e,e=t),e}function ce(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Pn?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(ea)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Eo()):(n=e,e=t)):(n=e,e=t),e}function Te(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===_n?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(ta)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Fo()):(n=e,e=t)):(n=e,e=t),e}function Lt(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===Ln?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(na)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Mo()):(n=e,e=t)):(n=e,e=t),e}function Dt(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===Dn?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(ra)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ro()):(n=e,e=t)):(n=e,e=t),e}function qe(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Un?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(aa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=$o()):(n=e,e=t)):(n=e,e=t),e}function ou(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Jn?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(ia)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Po()):(n=e,e=t)):(n=e,e=t),e}function su(){var e,a,o,u;return e=n,l.substr(n,9).toLowerCase()===Vn?(a=l.substr(n,9),n+=9):(a=t,f===0&&w(oa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=_o()):(n=e,e=t)):(n=e,e=t),e}function uu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===Zn?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(sa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Lo()):(n=e,e=t)):(n=e,e=t),e}function Ut(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===kn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ua)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Do()):(n=e,e=t)):(n=e,e=t),e}function lu(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===zn?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(la)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Uo()):(n=e,e=t)):(n=e,e=t),e}function Jt(){var e,a,o,u;return e=n,l.substr(n,9).toLowerCase()===Hn?(a=l.substr(n,9),n+=9):(a=t,f===0&&w(ca)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Jo()):(n=e,e=t)):(n=e,e=t),e}function Vt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===qn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(fa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Vo()):(n=e,e=t)):(n=e,e=t),e}function Zt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Yn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(da)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Zo()):(n=e,e=t)):(n=e,e=t),e}function cu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===jn?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(pa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ko()):(n=e,e=t)):(n=e,e=t),e}function fu(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===Bn?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(ma)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=zo()):(n=e,e=t)):(n=e,e=t),e}function du(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Qn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(va)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ho()):(n=e,e=t)):(n=e,e=t),e}function pu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Wn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ha)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=qo()):(n=e,e=t)):(n=e,e=t),e}function mu(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===Gn?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(wa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Yo()):(n=e,e=t)):(n=e,e=t),e}function vu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===Kn?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(Ia)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=jo()):(n=e,e=t)):(n=e,e=t),e}function hu(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===Xn?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(ga)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Bo()):(n=e,e=t)):(n=e,e=t),e}function wu(){var e,a,o,u;return e=n,l.substr(n,5).toLowerCase()===er?(a=l.substr(n,5),n+=5):(a=t,f===0&&w(ya)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Qo()):(n=e,e=t)):(n=e,e=t),e}function Iu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===tr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Ta)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Wo()):(n=e,e=t)):(n=e,e=t),e}function gu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===nr?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(Na)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Go()):(n=e,e=t)):(n=e,e=t),e}function yu(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===rr?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(Sa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ko()):(n=e,e=t)):(n=e,e=t),e}function kt(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===ar?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(Oa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Xo()):(n=e,e=t)):(n=e,e=t),e}function zt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===ir?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(xa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=es()):(n=e,e=t)):(n=e,e=t),e}function Tu(){var e,a,o,u;return e=n,l.substr(n,13).toLowerCase()===or?(a=l.substr(n,13),n+=13):(a=t,f===0&&w(Ca)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ts()):(n=e,e=t)):(n=e,e=t),e}function Nu(){var e,a,o,u;return e=n,l.substr(n,15).toLowerCase()===sr?(a=l.substr(n,15),n+=15):(a=t,f===0&&w(ba)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ns()):(n=e,e=t)):(n=e,e=t),e}function Ht(){var e,a,o,u;return e=n,l.substr(n,5).toLowerCase()===ur?(a=l.substr(n,5),n+=5):(a=t,f===0&&w(Aa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=rs()):(n=e,e=t)):(n=e,e=t),e}function qt(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===lr?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(Ea)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=as()):(n=e,e=t)):(n=e,e=t),e}function Yt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===cr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Fa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=is()):(n=e,e=t)):(n=e,e=t),e}function jt(){var e,a,o,u;return e=n,l.substr(n,6).toLowerCase()===fr?(a=l.substr(n,6),n+=6):(a=t,f===0&&w(Ma)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=os()):(n=e,e=t)):(n=e,e=t),e}function oe(){var e,a,o,u;return e=n,l.substr(n,6).toLowerCase()===dr?(a=l.substr(n,6),n+=6):(a=t,f===0&&w(Ra)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ss()):(n=e,e=t)):(n=e,e=t),e}function Ne(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===pr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w($a)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=us()):(n=e,e=t)):(n=e,e=t),e}function Se(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===mr?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(Pa)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ls()):(n=e,e=t)):(n=e,e=t),e}function Bt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===vr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(_a)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=cs()):(n=e,e=t)):(n=e,e=t),e}function Qt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===hr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(La)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=fs()):(n=e,e=t)):(n=e,e=t),e}function Su(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===wr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Da)),a!==t?(o=n,f++,u=N(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ds()):(n=e,e=t)):(n=e,e=t),e}function Oe(){var e;return l.charCodeAt(n)===44?(e=Ir,n++):(e=t,f===0&&w(Ua)),e}function D(){var e;return l.charCodeAt(n)===40?(e=gr,n++):(e=t,f===0&&w(Ja)),e}function U(){var e;return l.charCodeAt(n)===41?(e=yr,n++):(e=t,f===0&&w(Va)),e}function p(){var e,a;for(e=[],a=Wt();a!==t;)e.push(a),a=Wt();return e}function Wt(){var e;return br.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Za)),e}function Ou(){var e,a,o,u;if(e=n,(a=xt())!==t&&(v=e,a=ps(a)),(e=a)===t)if(e=n,l.charCodeAt(n)===96?(a=ot,n++):(a=t,f===0&&w(vt)),a!==t){if(o=[],lt.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(ht)),u!==t)for(;u!==t;)o.push(u),lt.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(ht));else o=t;o!==t?(l.charCodeAt(n)===96?(u=ot,n++):(u=t,f===0&&w(vt)),u!==t?(v=e,e=ms(o)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function xu(e,a){return{type:"unary-expression",operator:e,expr:a}}function Gt(e,a,o,u){var g={type:"binary-expression",operator:e,left:a,right:o};return u!==void 0&&(g.escape=u),g}function Cu(e,a){for(var o=[e],u=0;u<a.length;u++)o.push(a[u][3]);return o}function bu(e,a,o){return Cu(e,a)}function fe(e,a){for(var o=e,u=0;u<a.length;u++)o=Gt(a[u][1],o,a[u][3]);return o}function Au(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&_e("Timestamp literal is invalid")}function Eu(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&_e("Time literal is invalid")}function Fu(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&_e("Date literal is invalid")}if((I=P())!==t&&n===l.length)return I;throw I!==t&&n<l.length&&w(vs()),ws(Pe,K<l.length?l.charAt(K):null,K<l.length?Le(K,K+1):Le(K,K))}return i(r,Error),r.prototype.format=function(l){var h="Error: "+this.message;if(this.location){var I,t=null;for(I=0;I<l.length;I++)if(l[I].source===this.location.source){t=l[I].text.split(/\r\n|\n|\r/g);break}var T=this.location.start,O=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(T):T,P=this.location.source+":"+O.line+":"+O.column;if(t){var L=this.location.end,V=s("",O.line.toString().length," "),C=t[T.line-1],b=(T.line===L.line?L.column:C.length+1)-T.column||1;h+=`
 --> `+P+`
`+V+` |
`+O.line+" | "+C+`
`+V+" | "+s("",T.column-1," ")+s("",b,"^")}else h+=`
 at `+P}return h},r.buildMessage=function(l,h){var I={literal:function(C){return'"'+T(C.text)+'"'},class:function(C){var b=C.parts.map(function(q){return Array.isArray(q)?O(q[0])+"-"+O(q[1]):O(q)});return"["+(C.inverted?"^":"")+b.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(C){return C.description}};function t(C){return C.charCodeAt(0).toString(16).toUpperCase()}function T(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+t(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+t(b)})}function O(C){return C.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+t(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+t(b)})}function P(C){return I[C.type](C)}function L(C){var b,q,_=C.map(P);if(_.sort(),_.length>0){for(b=1,q=1;b<_.length;b++)_[b-1]!==_[b]&&(_[q]=_[b],q++);_.length=q}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function V(C){return C?'"'+T(C)+'"':"end of input"}return"Expected "+L(l)+" but "+V(h)+" found."},{SyntaxError:r,parse:c}},(nn=Be).exports&&(nn.exports=rn());var Gl=Be.exports;class Kl{static parse(r){return Gl.parse(r)}}const Xl=new Set(["current_timestamp","current_date","current_time"]);var te;(function(i){i[i.Date=1]="Date",i[i.DateOnly=2]="DateOnly",i[i.TimeOnly=3]="TimeOnly",i[i.TimeStampOffset=4]="TimeStampOffset"})(te||(te={}));class ec{static makeBool(r){return In(r)}static featureValue(r,s,c,l,h){return Tn(r,s,c,l,h)}static equalsNull(r){return r===null}static applyLike(r,s,c){return Ge(r,s,c)}static ensureArray(r){return Qe(r)}static applyIn(r,s){return We(r,s)}static currentDate(r){return H.fromNow(r)}static makeSqlInterval(r,s,c){return J.createFromValueAndQualifer(r,s,c)}static convertInterval(r){return r instanceof J?r.valueInMilliseconds():r}static currentTimestamp(r){return be(new Date,r)}static compare(r,s,c,l){return j(s,c,r)}static calculate(r,s,c,l){return hn(r,s,c,l)}static evaluateTime(r){return Xe(r)}static evaluateTimestamp(r,s,c){return Ae(r,s,c)}static evaluateDate(r,s){return pn(r,s)}static evaluateFunction(r,s,c){return et(r,s,c)}static lookup(r,s){const c=s[r];return c===void 0?null:c}static between(r,s,c){return r==null||s[0]==null||s[1]==null?null:j(r,s[0],">=")&&j(r,s[1],"<=")}static notbetween(r,s,c){return r==null||s[0]==null||s[1]==null?null:j(r,s[0],"<")||j(r,s[1],">")}static ternaryNot(r){return Ce(r)}static ternaryAnd(r,s){return gn(r,s)}static ternaryOr(r,s){return yn(r,s)}}let tc=class wn{constructor(r,s,c={timeZone:"UTC"}){this.fieldsIndex=s,this._complextypefields={},this.parameters={},this.timeReferenceZone="UTC",this._hasDateFunctions=void 0,this.configureExpressionTimeZone(c),this.parseTree=Kl.parse(r);const{isStandardized:l,isAggregate:h,referencedFieldNames:I}=this._extractExpressionInfo(s);this._referencedFieldNames=I,this.isStandardized=l,this.isAggregate=h}configureExpressionTimeZone(r){this.timeReferenceZone=r.timeZone}static convertValueToStorageFormat(r,s=null){if(s===null)return Y(r)?r.getTime():A(r)?r.toMillis():F(r)?r.toStorageFormat():R(r)?r.toStorageString():E(r)?r.toStorageFormat():r;switch(s){case"date":return Y(r)?r.getTime():A(r)?r.toMillis():F(r)?r.toMilliseconds():E(r)?r.toNumber():r;case"date-only":return Y(r)?H.fromDateJS(r).toString():F(r)?H.fromSqlTimeStampOffset(r).toString():A(r)?H.fromDateTime(r).toString():r;case"time-only":return Y(r)?B.fromDateJS(r).toStorageString():A(r)?B.fromDateTime(r).toStorageString():F(r)?B.fromSqlTimeStampOffset(r).toStorageString():R(r)?r.toStorageString():r;case"timestamp-offset":if(Y(r))return z.fromJSDate(r).toStorageFormat();if(A(r))return z.fromDateTime(r).toStorageFormat();if(F(r))return r.toStorageFormat()}return r}static create(r,s,c={timeZone:"UTC"}){return new wn(r,s,c)}get fieldNames(){return this._referencedFieldNames}testSet(r,s=ue){return!!this._evaluateNode(this.parseTree,null,s,r)}calculateValue(r,s=ue){const c=this._evaluateNode(this.parseTree,r,s,null);return c instanceof J?c.valueInMilliseconds()/864e5:c}calculateValueCompiled(r,s=ue){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(r,this.parameters,s,this._complextypefields,this.timeReferenceZone):Kt("esri-csp-restrictions")?this.calculateValue(r,s):(this._compileMe(),this.parseTree._compiledVersion(r,this.parameters,s,this._complextypefields,this.timeReferenceZone))}testFeature(r,s=ue){return!!this._evaluateNode(this.parseTree,r,s,null)}testFeatureCompiled(r,s=ue){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(r,this.parameters,s,this._complextypefields,this.timeReferenceZone):Kt("esri-csp-restrictions")?this.testFeature(r,s):(this._compileMe(),!!this.parseTree._compiledVersion(r,this.parameters,s,this._complextypefields,this.timeReferenceZone))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,r=>{r.type==="current-time"?this._hasDateFunctions=!0:r.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Xl.has(r.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const r=new Set;return this._visitAll(this.parseTree,s=>{s.type==="function"&&r.add(s.name.toLowerCase())}),Array.from(r)}getExpressions(){const r=new Map;return this._visitAll(this.parseTree,s=>{if(s.type==="function"){const c=s.name.toLowerCase(),l=s.args.value[0];if(l.type==="column-reference"){const h=l.column,I=`${c}-${h}`;r.has(I)||r.set(I,{aggregateType:c,field:h})}}}),[...r.values()]}getVariables(){const r=new Set;return this._visitAll(this.parseTree,s=>{s.type==="parameter"&&r.add(s.value.toLowerCase())}),Array.from(r)}_compileMe(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","complextypefields","timeReferenceZone",r).bind(ec)}_extractExpressionInfo(r){const s=[],c=new Set;let l=!0,h=!1;return this._visitAll(this.parseTree,I=>{switch(I.type){case"column-reference":{const t=r==null?void 0:r.get(I.column);let T,O;t?T=O=t.name??"":(O=I.column,T=O.toLowerCase()),t&&t.name&&(t.type==="date"||t.type==="esriFieldTypeDate")&&(this._complextypefields[t.name]=te.Date),!(t!=null&&t.name)||t.type!=="date-only"&&t.type!=="esriFieldTypeDateOnly"||(this._complextypefields[t.name]=te.DateOnly),t&&t.name&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")&&(this._complextypefields[t.name]=te.TimeOnly),t&&t.name&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")&&(this._complextypefields[t.name]=te.TimeStampOffset),c.has(T)||(c.add(T),s.push(O)),I.column=O;break}case"function":{const{name:t,args:T}=I,O=T.value.length;l&&(l=Xu(t,O)),h===!1&&(h=en(t,O));break}}}),{referencedFieldNames:Array.from(s),isStandardized:l,isAggregate:h}}_visitAll(r,s){if(r!=null)switch(s(r),r.type){case"when-clause":this._visitAll(r.operand,s),this._visitAll(r.value,s);break;case"case-expression":for(const c of r.clauses)this._visitAll(c,s);r.format==="simple"&&this._visitAll(r.operand,s),r.else!==null&&this._visitAll(r.else,s);break;case"expression-list":for(const c of r.value)this._visitAll(c,s);break;case"unary-expression":this._visitAll(r.expr,s);break;case"binary-expression":this._visitAll(r.left,s),this._visitAll(r.right,s);break;case"function":this._visitAll(r.args,s)}}evaluateNodeToJavaScript(r){switch(r.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case"case-expression":{let s="";if(r.format==="simple"){const c=this.evaluateNodeToJavaScript(r.operand);s="( ";for(let l=0;l<r.clauses.length;l++)s+=" (this.compare('=',"+c+","+this.evaluateNodeToJavaScript(r.clauses[l].operand)+") ? ("+this.evaluateNodeToJavaScript(r.clauses[l].value)+") : ";r.else!==null?s+=this.evaluateNodeToJavaScript(r.else):s+="null",s+=" )"}else{s="( ";for(let c=0;c<r.clauses.length;c++)s+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[c].operand)+")===true ? ("+this.evaluateNodeToJavaScript(r.clauses[c].value)+") : ";r.else!==null?s+=this.evaluateNodeToJavaScript(r.else):s+="null",s+=" )"}return s}case"parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case"expression-list":{let s="[";for(const c of r.value)s!=="["&&(s+=","),s+=this.evaluateNodeToJavaScript(c);return s+="]",s}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case"binary-expression":switch(r.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"IS":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case"ISNOT":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeReferenceZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeReferenceZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeReferenceZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeReferenceZone)"}throw new m(d.UnsupportedOperator,{operator:r.operator});case"null":case"boolean":case"string":case"number":return JSON.stringify(r.value);case"time":return"this.evaluateTime(JSON.stringify(node.value))";case"date":return"this.evaluateDate(JSON.stringify(node.value), timeReferenceZone)";case"timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), timeReferenceZone)";case"current-time":return r.mode==="date"?"this.currentDate(timeReferenceZone)":"this.currentTimestamp(timeReferenceZone)";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(r.column)+",complextypefields,attributeAdapter, timeReferenceZone)";case"function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+", timeReferenceZone)"}throw new m(d.UnsupportedSyntax,{node:r.type})}_evaluateNode(r,s,c,l){var I;let h;switch(r.type){case"interval":{const t=this._evaluateNode(r.value,s,c,l);return J.createFromValueAndQualifer(t,r.qualifier,r.op)}case"case-expression":if(r.format==="simple"){const t=this._evaluateNode(r.operand,s,c,l);for(let T=0;T<r.clauses.length;T++)if(j(t,this._evaluateNode(r.clauses[T].operand,s,c,l),"=",this.timeReferenceZone))return this._evaluateNode(r.clauses[T].value,s,c,l);if(r.else!==null)return this._evaluateNode(r.else,s,c,l)}else{for(let t=0;t<r.clauses.length;t++)if(In(this._evaluateNode(r.clauses[t].operand,s,c,l)))return this._evaluateNode(r.clauses[t].value,s,c,l);if(r.else!==null)return this._evaluateNode(r.else,s,c,l)}return null;case"parameter":return h=this.parameters[r.value.toLowerCase()],Y(h)?G.fromJSDate(h):h instanceof Mu?h.toDateTime():h;case"expression-list":{const t=[];for(const T of r.value)t.push(this._evaluateNode(T,s,c,l));return t}case"unary-expression":return Ce(this._evaluateNode(r.expr,s,c,l));case"binary-expression":switch(r.operator){case"AND":return gn(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l));case"OR":return yn(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l));case"IS":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return this._evaluateNode(r.left,s,c,l)===null;case"ISNOT":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return this._evaluateNode(r.left,s,c,l)!==null;case"IN":{const t=Qe(this._evaluateNode(r.right,s,c,l));return We(this._evaluateNode(r.left,s,c,l),t)}case"NOT IN":{const t=Qe(this._evaluateNode(r.right,s,c,l));return Ce(We(this._evaluateNode(r.left,s,c,l),t))}case"BETWEEN":{const t=this._evaluateNode(r.left,s,c,l),T=this._evaluateNode(r.right,s,c,l);return t==null||T[0]==null||T[1]==null?null:j(t,T[0],">=",this.timeReferenceZone)&&j(t,T[1],"<=",this.timeReferenceZone)}case"NOTBETWEEN":{const t=this._evaluateNode(r.left,s,c,l),T=this._evaluateNode(r.right,s,c,l);return t==null||T[0]==null||T[1]==null?null:j(t,T[0],"<",this.timeReferenceZone)||j(t,T[1],">",this.timeReferenceZone)}case"LIKE":return Ge(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),r.escape);case"NOT LIKE":return Ce(Ge(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),r.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return j(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),r.operator,this.timeReferenceZone);case"-":case"+":case"*":case"/":case"||":return hn(r.operator,this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),this.timeReferenceZone)}case"null":case"boolean":case"string":case"number":return r.value;case"date":return pn(r.value,this.timeReferenceZone);case"timestamp":return Ae(r.value,this.timeReferenceZone);case"time":return Xe(r.value);case"current-time":return r.mode==="date"?H.fromNow(this.timeReferenceZone):be(new Date,this.timeReferenceZone);case"column-reference":return Tn(s,r.column,this._complextypefields,c,this.timeReferenceZone);case"data-type":return r.value;case"function":{if(this.isAggregate&&en(r.name,r.args.value.length)){const T=[];for(const O of((I=r.args)==null?void 0:I.value)||[]){const P=[];for(const L of l||[])P.push(this._evaluateNode(O,L,c,null));T.push(P)}return _u(r.name,T)}const t=this._evaluateNode(r.args,s,c,l);return et(r.name,t,this.timeReferenceZone)}}throw new m(d.UnsupportedSyntax,{node:r.type})}};function In(i){return i===!0}function Qe(i){return Array.isArray(i)?i:[i]}function Ce(i){return i!==null?i!==!0:null}function gn(i,r){return i!=null&&r!=null?i===!0&&r===!0:i!==!1&&r!==!1&&null}function yn(i,r){return i!=null&&r!=null?i===!0||r===!0:i===!0||r===!0||null}function We(i,r){if(i==null)return null;let s=!1;for(const c of r)if(c==null)s=null;else if(i===c){s=!0;break}return s}const an="-[]/{}()*+?.\\^$|";var se;function nc(i,r){const s=r;let c="",l=se.Normal;for(let h=0;h<i.length;h++){const I=i.charAt(h);switch(l){case se.Normal:I===s?l=se.Escaped:an.includes(I)?c+="\\"+I:c+=I==="%"?".*":I==="_"?".":I;break;case se.Escaped:an.includes(I)?c+="\\"+I:c+=I,l=se.Normal}}return new RegExp("^"+c+"$","m")}function Ge(i,r,s){return i==null?null:nc(r,s).test(i)}function rc(i){return i&&typeof i.attributes=="object"}function Tn(i,r,s,c,l){const h=c.getAttribute(i,r);return h!=null&&s[r]===te.Date?be(new Date(h),l):h!=null&&s[r]===te.DateOnly?H.fromReader(h):h!=null&&s[r]===te.TimeOnly?B.fromReader(h):h!=null&&s[r]===te.TimeStampOffset?new z(h):h}(function(i){i[i.Normal=0]="Normal",i[i.Escaped=1]="Escaped"})(se||(se={}));const ue={getAttribute:(i,r)=>(rc(i)?i.attributes:i)[r]},sc=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:tc,defaultAttributeAdapter:ue},Symbol.toStringTag,{value:"Module"}));export{sc as W,Q as a,m as n,z as r,oc as s,d as t,tc as x};
