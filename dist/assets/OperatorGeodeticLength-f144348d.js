import{fL as f,fM as S}from"./index-c2b82012.js";import{c as E,_ as G,a as x,ad as P,f as T,g as v,o as w,p as C,ae as L,af as X,ag as D,k as Y,U as _,V as q,W as I}from"./OperatorProject-1ae2812c.js";import{P as M}from"./OperatorShapePreservingLength-f6bf5bbb.js";import"./SimpleGeometryCursor-e3941f41.js";class A{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,g){return!1}canAccelerateGeometry(t){return!1}execute(t,r,g,a){if(g===4)return new M().execute(t,r,a);if(r.getCoordinateSystemType()===0&&E(""),G(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),n=I();s.querySpheroidData(n);const c=n.majorSemiAxis,u=n.e2,m=s.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===x.enumPolygon?e=t.getBoundary():o===x.enumEnvelope?e=P(t):T(o)?(e=new v({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new w().execute(e,0,r.getTolerance(0),0,a)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=C(e,r),o===x.enumPolyline&&e===t&&(e=t.clone());const h=new L;r.getPannableExtent().queryIntervalX(h);for(let l=0,d=e.getPointCount();l<d;l++){const p=e.getXY(l);p.x=X(p.x,h),e.setXY(l,p)}}const y=e.createInstance();e=D(i,e,y,a)?y:new Y().execute(e,i,a)}return this._ExecuteMultiPathGeodeticLength(e,g,c,u,m)}_ExecuteMultiPathGeodeticLength(t,r,g,a,s){const n={stack:[],error:void 0,hasError:!1};try{const c=f(n,new _,!1);let u=0;const m=t.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(s),i.scale(s),q.geodeticDistance(g,a,o.x,o.y,i.x,i.y,c,null,null,r),u+=c.val}return u}catch(c){n.error=c,n.hasError=!0}finally{S(n)}}}export{A as OperatorGeodeticLength};
