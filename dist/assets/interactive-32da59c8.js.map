{"version":3,"file":"interactive-32da59c8.js","sources":["../../node_modules/@esri/calcite-components/dist/components/interactive.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.10.1\n */\nimport { Build, h } from '@stencil/core/internal/client/index.js';\n\nfunction getUserAgentData() {\n    return navigator.userAgentData;\n}\nfunction getUserAgentString() {\n    if (!Build.isBrowser) {\n        return \"\";\n    }\n    const uaData = getUserAgentData();\n    return uaData?.brands\n        ? uaData.brands.map(({ brand, version }) => `${brand}/${version}`).join(\" \")\n        : navigator.userAgent;\n}\n\n// ⚠️ browser-sniffing is not a best practice and should be avoided ⚠️\nconst isFirefox = /firefox/i.test(getUserAgentString());\nconst disabledElementToParent = isFirefox\n    ? new WeakMap()\n    : null;\nfunction interceptedClick() {\n    const { disabled } = this;\n    if (!disabled) {\n        HTMLElement.prototype.click.call(this);\n    }\n}\nfunction onPointerDown(event) {\n    const interactiveElement = event.target;\n    if (isFirefox && !disabledElementToParent.get(interactiveElement)) {\n        return;\n    }\n    const { disabled } = interactiveElement;\n    if (disabled) {\n        // prevent click from moving focus on host\n        event.preventDefault();\n    }\n}\nconst nonBubblingWhenDisabledMouseEvents = [\"mousedown\", \"mouseup\", \"click\"];\nfunction onNonBubblingWhenDisabledMouseEvent(event) {\n    const interactiveElement = event.target;\n    if (isFirefox && !disabledElementToParent.get(interactiveElement)) {\n        return;\n    }\n    // prevent disallowed mouse events from being emitted on the disabled host (per https://github.com/whatwg/html/issues/5886)\n    // ⚠ we generally avoid stopping propagation of events, but this is needed to adhere to the intended spec changes above ⚠\n    if (interactiveElement.disabled) {\n        event.stopImmediatePropagation();\n        event.preventDefault();\n    }\n}\nconst captureOnlyOptions = { capture: true };\n/**\n * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.\n *\n * This should be used in the `componentDidRender` lifecycle hook.\n *\n * **Notes**\n *\n * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.\n * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error\n *\n * @param component\n */\nfunction updateHostInteraction(component) {\n    if (component.disabled) {\n        component.el.setAttribute(\"aria-disabled\", \"true\");\n        if (component.el.contains(document.activeElement)) {\n            document.activeElement.blur();\n        }\n        blockInteraction(component);\n        return;\n    }\n    restoreInteraction(component);\n    component.el.removeAttribute(\"aria-disabled\");\n}\nfunction blockInteraction(component) {\n    component.el.click = interceptedClick;\n    if (isFirefox) {\n        const currentParent = getParentElement(component);\n        const trackedParent = disabledElementToParent.get(component.el);\n        if (trackedParent !== currentParent) {\n            removeInteractionListeners(trackedParent);\n            disabledElementToParent.set(component.el, currentParent);\n        }\n        addInteractionListeners(disabledElementToParent.get(component.el));\n        return;\n    }\n    addInteractionListeners(component.el);\n}\nfunction addInteractionListeners(element) {\n    if (!element) {\n        // this early return path is only applicable to Firefox\n        return;\n    }\n    element.addEventListener(\"pointerdown\", onPointerDown, captureOnlyOptions);\n    nonBubblingWhenDisabledMouseEvents.forEach((event) => element.addEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));\n}\nfunction getParentElement(component) {\n    return (component.el.parentElement || component.el); /* assume element is host if it has no parent when connected */\n}\nfunction restoreInteraction(component) {\n    delete component.el.click; // fallback on HTMLElement.prototype.click\n    if (isFirefox) {\n        removeInteractionListeners(disabledElementToParent.get(component.el));\n        disabledElementToParent.delete(component.el);\n        return;\n    }\n    removeInteractionListeners(component.el);\n}\nfunction removeInteractionListeners(element) {\n    if (!element) {\n        // this early return path is only applicable to Firefox\n        return;\n    }\n    element.removeEventListener(\"pointerdown\", onPointerDown, captureOnlyOptions);\n    nonBubblingWhenDisabledMouseEvents.forEach((event) => element.removeEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));\n}\n/**\n * This utility helps disable components consistently in Firefox.\n *\n * It needs to be called in `connectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).\n *\n * @param component\n */\nfunction connectInteractive(component) {\n    if (!component.disabled || !isFirefox) {\n        return;\n    }\n    blockInteraction(component);\n}\n/**\n * This utility restores interactivity to disabled components consistently in Firefox.\n *\n * It needs to be called in `disconnectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).\n *\n * @param component\n */\nfunction disconnectInteractive(component) {\n    if (!isFirefox) {\n        return;\n    }\n    restoreInteraction(component);\n}\nconst CSS = {\n    container: \"interaction-container\",\n};\nfunction InteractiveContainer({ disabled }, children) {\n    return (h(\"div\", { class: CSS.container, inert: disabled }, ...children));\n}\n\nexport { InteractiveContainer as I, connectInteractive as c, disconnectInteractive as d, getUserAgentString as g, updateHostInteraction as u };\n\n//# sourceMappingURL=interactive.js.map"],"names":["getUserAgentData","getUserAgentString","uaData","brand","version","isFirefox","disabledElementToParent","interceptedClick","disabled","onPointerDown","event","interactiveElement","nonBubblingWhenDisabledMouseEvents","onNonBubblingWhenDisabledMouseEvent","captureOnlyOptions","updateHostInteraction","component","blockInteraction","restoreInteraction","currentParent","getParentElement","trackedParent","removeInteractionListeners","addInteractionListeners","element","connectInteractive","disconnectInteractive","CSS","InteractiveContainer","children","h"],"mappings":"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","x_google_ignoreList":[0]}